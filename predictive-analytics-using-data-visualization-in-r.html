<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 104 Predictive Analytics using Data Visualization in R | EDAV Fall 2021 Tues/Thurs Community Contributions</title>
<meta name="description" content='Rahulraj Singh # This external GitHub installation is needed to import the makeR library # require(devtools) #  install_github("jbryer/makeR")  104.1 Building a Trading Strategy and an optimal...'>
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 104 Predictive Analytics using Data Visualization in R | EDAV Fall 2021 Tues/Thurs Community Contributions">
<meta property="og:type" content="book">
<meta property="og:description" content='Rahulraj Singh # This external GitHub installation is needed to import the makeR library # require(devtools) #  install_github("jbryer/makeR")  104.1 Building a Trading Strategy and an optimal...'>
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 104 Predictive Analytics using Data Visualization in R | EDAV Fall 2021 Tues/Thurs Community Contributions">
<meta name="twitter:description" content='Rahulraj Singh # This external GitHub installation is needed to import the makeR library # require(devtools) #  install_github("jbryer/makeR")  104.1 Building a Trading Strategy and an optimal...'>
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-8.1.2/highcharts.js"></script><script src="libs/highcharts-8.1.2/highcharts-3d.js"></script><script src="libs/highcharts-8.1.2/highcharts-more.js"></script><script src="libs/highcharts-8.1.2/modules/stock.js"></script><script src="libs/highcharts-8.1.2/modules/map.js"></script><script src="libs/highcharts-8.1.2/modules/annotations.js"></script><script src="libs/highcharts-8.1.2/modules/data.js"></script><script src="libs/highcharts-8.1.2/modules/drilldown.js"></script><script src="libs/highcharts-8.1.2/modules/item-series.js"></script><script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script><script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-8.1.2/modules/exporting.js"></script><script src="libs/highcharts-8.1.2/modules/export-data.js"></script><script src="libs/highcharts-8.1.2/modules/funnel.js"></script><script src="libs/highcharts-8.1.2/modules/heatmap.js"></script><script src="libs/highcharts-8.1.2/modules/treemap.js"></script><script src="libs/highcharts-8.1.2/modules/sankey.js"></script><script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script><script src="libs/highcharts-8.1.2/modules/organization.js"></script><script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script><script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script><script src="libs/highcharts-8.1.2/modules/sunburst.js"></script><script src="libs/highcharts-8.1.2/modules/vector.js"></script><script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script><script src="libs/highcharts-8.1.2/modules/xrange.js"></script><script src="libs/highcharts-8.1.2/modules/tilemap.js"></script><script src="libs/highcharts-8.1.2/modules/venn.js"></script><script src="libs/highcharts-8.1.2/modules/gantt.js"></script><script src="libs/highcharts-8.1.2/modules/timeline.js"></script><script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script><script src="libs/highcharts-8.1.2/modules/bullet.js"></script><script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script><script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script><script src="libs/highcharts-8.1.2/modules/lollipop.js"></script><script src="libs/highcharts-8.1.2/modules/series-label.js"></script><script src="libs/highcharts-8.1.2/plugins/motion.js"></script><script src="libs/highcharts-8.1.2/custom/reset.js"></script><script src="libs/highcharts-8.1.2/modules/boost.js"></script><script src="libs/highchart-binding-0.8.2/highchart.js"></script><script src="libs/detect-resize-0.5.3/jquery.resize.js"></script><link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet">
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script><script src="libs/vega-1.4.3/vega.min.js"></script><script src="libs/lodash-2.2.1/lodash.min.js"></script><script>var lodash = _.noConflict();</script><link href="libs/ggvis-0.4.7/css/ggvis.css" rel="stylesheet">
<script src="libs/ggvis-0.4.7/js/ggvis.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">EDAV Fall 2021 Tues/Thurs Community Contributions</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="statistics-in-r-vs-python.html"><span class="header-section-number">5</span> Statistics in R vs Python</a></li>
<li><a class="" href="data-visualization-with-seaborn.html"><span class="header-section-number">6</span> Data Visualization with Seaborn</a></li>
<li><a class="" href="how-to-make-your-own-r-package.html"><span class="header-section-number">7</span> How to Make Your Own R package</a></li>
<li><a class="" href="rchess-package-cheatsheet.html"><span class="header-section-number">8</span> RChess package cheatsheet</a></li>
<li><a class="" href="hypothesis-testing-cheatsheet.html"><span class="header-section-number">9</span> Hypothesis testing cheatsheet</a></li>
<li><a class="" href="interactive-web-visualizations-for-r-cheatsheet.html"><span class="header-section-number">10</span> Interactive web visualizations for R cheatsheet"</a></li>
<li><a class="" href="ggforce.html"><span class="header-section-number">11</span> ggforce</a></li>
<li><a class="" href="gganimate-cheatsheet.html"><span class="header-section-number">12</span> GGanimate cheatsheet</a></li>
<li><a class="" href="statistical-tests-and-parameter-estimations-in-r-cheatsheet.html"><span class="header-section-number">13</span> Statistical Tests and Parameter Estimations in R Cheatsheet</a></li>
<li><a class="" href="ggalluvial-cheat-sheet.html"><span class="header-section-number">14</span> ggalluvial-cheat-sheet</a></li>
<li><a class="" href="introduction-to-plotly.html"><span class="header-section-number">15</span> Introduction to plotly</a></li>
<li><a class="" href="draw-graphs-using-python-and-r.html"><span class="header-section-number">16</span> draw graphs using python and R</a></li>
<li><a class="" href="data-visualization-packages-in-r.html"><span class="header-section-number">17</span> Data Visualization Packages in R</a></li>
<li><a class="" href="esquisse-cheat-sheet.html"><span class="header-section-number">18</span> Esquisse Cheat sheet</a></li>
<li><a class="" href="review-sheet-for-r-code-and-data-transformation.html"><span class="header-section-number">19</span> review sheet for r code and data transformation</a></li>
<li><a class="" href="scrape-twitter-data-using-r.html"><span class="header-section-number">20</span> Scrape Twitter data using R</a></li>
<li><a class="" href="r-note-and-mathematics-in-rmd-cheatsheet.html"><span class="header-section-number">21</span> R note and Mathematics in Rmd cheatsheet</a></li>
<li><a class="" href="textbook-notes.html"><span class="header-section-number">22</span> Textbook Notes</a></li>
<li><a class="" href="ggplot2-cheatsheet.html"><span class="header-section-number">23</span> ggplot2 cheatsheet</a></li>
<li><a class="" href="rstudio-cheatsheet.html"><span class="header-section-number">24</span> RStudio Cheatsheet</a></li>
<li><a class="" href="d3-visualization-in-r-cheatsheet.html"><span class="header-section-number">25</span> D3 Visualization in R Cheatsheet</a></li>
<li><a class="" href="colors.html"><span class="header-section-number">26</span> Colors</a></li>
<li><a class="" href="r-data-sets.html"><span class="header-section-number">27</span> R data sets</a></li>
<li><a class="" href="introduction-to-plotly-1.html"><span class="header-section-number">28</span> “Introduction to Plotly”</a></li>
<li><a class="" href="tidyverse-cheatsheet.html"><span class="header-section-number">29</span> Tidyverse Cheatsheet</a></li>
<li><a class="" href="learning-sql-with-its-r-dplyr-translation.html"><span class="header-section-number">30</span> Learning SQL with Its R dplyr Translation</a></li>
<li><a class="" href="animate-time-series-the-goyav-package.html"><span class="header-section-number">31</span> Animate Time Series : the goyav package</a></li>
<li><a class="" href="string-manipulation-in-r.html"><span class="header-section-number">32</span> String Manipulation in R</a></li>
<li><a class="" href="ggalluvial-cheatsheet.html"><span class="header-section-number">33</span> ggalluvial Cheatsheet</a></li>
<li><a class="" href="a-cheatsheet-from-pandas-to-base-r-and-tidyverse.html"><span class="header-section-number">34</span> A cheatsheet from pandas to base r and tidyverse</a></li>
<li><a class="" href="base-r-ggplot2-python-graphing-performances.html"><span class="header-section-number">35</span> Base R, ggplot2, &amp; Python Graphing Performances</a></li>
<li><a class="" href="cheat-sheet-to-score-100-points.html"><span class="header-section-number">36</span> Cheat Sheet to Score 100 Points</a></li>
<li><a class="" href="base-r-string-operations-cheatsheet.html"><span class="header-section-number">37</span> Base R String Operations Cheatsheet</a></li>
<li><a class="" href="data-manipulation-in-r.html"><span class="header-section-number">38</span> Data manipulation in R</a></li>
<li><a class="" href="ggplot_matplotlib_cheatsheet.html"><span class="header-section-number">39</span> ggplot_matplotlib_cheatsheet</a></li>
<li><a class="" href="introduction-to-log-transformation.html"><span class="header-section-number">40</span> Introduction to Log-transformation</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="how-to-integrate-r-with-postgresql.html"><span class="header-section-number">41</span> How to Integrate R with PostgreSQL</a></li>
<li><a class="" href="tutorial-on-cluster-analysis.html"><span class="header-section-number">42</span> Tutorial on Cluster Analysis</a></li>
<li><a class="" href="apply-function-in-r.html"><span class="header-section-number">43</span> Apply function in r</a></li>
<li><a class="" href="introduction-to-interactive-graphs-in-r.html"><span class="header-section-number">44</span> Introduction to interactive graphs in R</a></li>
<li><a class="" href="plot-and-analyze-stock-data-with-r.html"><span class="header-section-number">45</span> Plot and Analyze Stock Data with R</a></li>
<li><a class="" href="data-visulization-ordering.html"><span class="header-section-number">46</span> Data Visulization Ordering</a></li>
<li><a class="" href="tutorial-on-lattice-package-in-r.html"><span class="header-section-number">47</span> Tutorial on lattice package in R</a></li>
<li><a class="" href="network-visualization-in-r.html"><span class="header-section-number">48</span> Network Visualization in R</a></li>
<li><a class="" href="dplyr-tutorial-in-r.html"><span class="header-section-number">49</span> Dplyr tutorial in R</a></li>
<li><a class="" href="downloading-files.html"><span class="header-section-number">50</span> Downloading files</a></li>
<li><a class="" href="video-introduction-to-maps-with-ggmap.html"><span class="header-section-number">51</span> Video introduction to maps with ggmap</a></li>
<li><a class="" href="comparison-among-base-r-tidyverse-and-datatable.html"><span class="header-section-number">52</span> Comparison among base R, tidyverse, and datatable</a></li>
<li><a class="" href="raincloud-plot-101-density-plot-or-boxplotwhy-not-do-both.html"><span class="header-section-number">53</span> Raincloud plot 101: density plot or boxplot？Why not do both!</a></li>
<li><a class="" href="an-introduction-to-dygraph-in-r.html"><span class="header-section-number">54</span> An Introduction to Dygraph in R</a></li>
<li><a class="" href="streamlit-tutorial.html"><span class="header-section-number">55</span> Streamlit Tutorial</a></li>
<li><a class="" href="hive-plots-with-the-ggraph-and-hiver-packages.html"><span class="header-section-number">56</span> Hive plots with the ggraph and hiver packages</a></li>
<li><a class="" href="introduction-to-xai-explainable-ai-in-r.html"><span class="header-section-number">57</span> Introduction to XAI (Explainable AI) in R</a></li>
<li><a class="" href="tutorial-for-gg_cleveland.html"><span class="header-section-number">58</span> Tutorial for gg_cleveland</a></li>
<li><a class="" href="neural-network-tools-in-r.html"><span class="header-section-number">59</span> Neural network tools in R</a></li>
<li><a class="" href="r-dplyr-vs-python-pandas.html"><span class="header-section-number">60</span> R Dplyr vs Python Pandas</a></li>
<li><a class="" href="readable-plots.html"><span class="header-section-number">61</span> Readable Plots</a></li>
<li><a class="" href="introduction-to-exploratory-spatial-data-analysis-and-visualization-using-qgis.html"><span class="header-section-number">62</span> Introduction to exploratory spatial data analysis and visualization using QGIS</a></li>
<li><a class="" href="data-visualization-in-python-vs-r.html"><span class="header-section-number">63</span> Data Visualization in Python vs R</a></li>
<li><a class="" href="base-r-tutorial.html"><span class="header-section-number">64</span> Base R Tutorial</a></li>
<li><a class="" href="python-altair-visualization-method-tutorial.html"><span class="header-section-number">65</span> Python Altair Visualization Method Tutorial</a></li>
<li><a class="" href="r-to-python-easy-plot.html"><span class="header-section-number">66</span> R to python easy plot</a></li>
<li><a class="" href="introduction-to-models-and-prediction-evaluation.html"><span class="header-section-number">67</span> Introduction to models and prediction evaluation</a></li>
<li><a class="" href="introduction-to-interactive-time-series-visualizations-with-dygraphs-in-r.html"><span class="header-section-number">68</span> Introduction to Interactive Time Series Visualizations with dygraphs in R</a></li>
<li><a class="" href="integrate-r-with-python.html"><span class="header-section-number">69</span> Integrate R with Python</a></li>
<li><a class="" href="python-visualization-tutorial.html"><span class="header-section-number">70</span> Python Visualization Tutorial</a></li>
<li><a class="" href="gganimate-tutorial.html"><span class="header-section-number">71</span> Gganimate Tutorial</a></li>
<li><a class="" href="get-nba-dataset-in-r.html"><span class="header-section-number">72</span> Get NBA dataset in R</a></li>
<li><a class="" href="mtemplates.html"><span class="header-section-number">73</span> Mtemplates</a></li>
<li><a class="" href="introduction-to-time-series-analysis-in-r.html"><span class="header-section-number">74</span> Introduction to Time Series Analysis in R</a></li>
<li><a class="" href="storytelling-with-data.html"><span class="header-section-number">75</span> Storytelling with Data</a></li>
<li><a class="" href="tutorial-on-r-torch-package.html"><span class="header-section-number">76</span> Tutorial on R torch package</a></li>
<li><a class="" href="edav-tutorials-correlogram-calendar-heatmap-and-slopegram.html"><span class="header-section-number">77</span> EDAV Tutorials: Correlogram, Calendar Heatmap and Slopegram</a></li>
<li><a class="" href="recursive-codes-and-self-organized-map-with-r.html"><span class="header-section-number">78</span> Recursive codes and self-organized map with R</a></li>
<li><a class="" href="tutorial-of-three-ggplot2-based-packages.html"><span class="header-section-number">79</span> Tutorial of three ggplot2 based packages</a></li>
<li><a class="" href="a-step-by-step-tutorial-for-natural-language-processing-in-r.html"><span class="header-section-number">80</span> A Step by Step Tutorial for Natural Language Processing in R</a></li>
<li><a class="" href="tutorial-for-ggvis-and-its-comparison-with-ggplot2.html"><span class="header-section-number">81</span> Tutorial for ggvis and its Comparison with ggplot2</a></li>
<li><a class="" href="feature-selection-in-r.html"><span class="header-section-number">82</span> Feature selection in r</a></li>
<li><a class="" href="debugging-in-rstudio.html"><span class="header-section-number">83</span> Debugging in Rstudio</a></li>
<li><a class="" href="r-tutorial-cheatsheet.html"><span class="header-section-number">84</span> R tutorial cheatsheet</a></li>
<li><a class="" href="brief-introduction-of-ggpubr.html"><span class="header-section-number">85</span> Brief Introduction of ggpubr</a></li>
<li><a class="" href="r-based-data-organization-and-visualization.html"><span class="header-section-number">86</span> R based data organization and visualization</a></li>
<li><a class="" href="r-packages-for-map-visualization.html"><span class="header-section-number">87</span> R packages for map Visualization</a></li>
<li><a class="" href="common-git-command-lines-tutorial-when-working-on-studio.html"><span class="header-section-number">88</span> Common git command lines tutorial when working on studio</a></li>
<li><a class="" href="tutorial-of-radar-chart.html"><span class="header-section-number">89</span> Tutorial of radar chart</a></li>
<li><a class="" href="interactive-radar.html"><span class="header-section-number">90</span> Interactive Radar</a></li>
<li><a class="" href="r-shiny-tutorial.html"><span class="header-section-number">91</span> R shiny tutorial</a></li>
<li><a class="" href="tutorial-on-r-markdown.html"><span class="header-section-number">92</span> Tutorial on R Markdown</a></li>
<li><a class="" href="dlookr-package.html"><span class="header-section-number">93</span> Dlookr package</a></li>
<li><a class="" href="urca-unit-root-test-and-cointegration-test.html"><span class="header-section-number">94</span> Urca: Unit Root Test and Cointegration Test</a></li>
<li><a class="" href="pygal-tutorial.html"><span class="header-section-number">95</span> pygal tutorial</a></li>
<li><a class="" href="comparing-excel-chart-making-with-rs.html"><span class="header-section-number">96</span> Comparing Excel Chart Making with R’s</a></li>
<li><a class="" href="joining-and-reshaping-in-r.html"><span class="header-section-number">97</span> Joining and reshaping in R</a></li>
<li><a class="" href="running-sql-queries-on-dataframes.html"><span class="header-section-number">98</span> Running Sql Queries on Dataframes</a></li>
<li><a class="" href="tidyverse.html"><span class="header-section-number">99</span> TidyVerse</a></li>
<li><a class="" href="how-to-animate-your-plots.html"><span class="header-section-number">100</span> How to animate your plots</a></li>
<li><a class="" href="dataframe-operations-tutorial.html"><span class="header-section-number">101</span> Dataframe operations tutorial</a></li>
<li><a class="" href="a-brief-instruction-for-the-half-semester-of-edav5702.html"><span class="header-section-number">102</span> A brief instruction for the half semester of EDAV5702</a></li>
<li><a class="" href="ggplot2-in-python.html"><span class="header-section-number">103</span> ggplot2 in python</a></li>
<li><a class="active" href="predictive-analytics-using-data-visualization-in-r.html"><span class="header-section-number">104</span> Predictive Analytics using Data Visualization in R</a></li>
<li><a class="" href="color-selection-for-ggplot-graphs.html"><span class="header-section-number">105</span> Color selection for ggplot graphs</a></li>
<li class="book-part">Project &amp; Workshops</li>
<li><a class="" href="introduction-to-analytics-consulting-at-accenture.html"><span class="header-section-number">106</span> Introduction to analytics consulting at Accenture</a></li>
<li><a class="" href="map-of-the-r-world.html"><span class="header-section-number">107</span> Map of the R world</a></li>
<li><a class="" href="alluvial-diagrams-and-their-implementation-using-ggalluvial-in-r.html"><span class="header-section-number">108</span> Alluvial diagrams and their implementation using GGalluvial in R</a></li>
<li><a class="" href="building-a-dashboard-in-r-for-data-analysis-and-visualization-using-shiny-package.html"><span class="header-section-number">109</span> Building a Dashboard in R for Data Analysis and Visualization using shiny package</a></li>
<li><a class="" href="rgl-package.html"><span class="header-section-number">110</span> RGL Package</a></li>
<li class="book-part">Data Visualization</li>
<li><a class="" href="an-introduction-to-pyecharts-package-in-python.html"><span class="header-section-number">111</span> An introduction to pyecharts package in Python</a></li>
<li><a class="" href="visualization-in-r-v.s.-python.html"><span class="header-section-number">112</span> Visualization in R v.s. Python</a></li>
<li><a class="" href="understand-data-with-plots.html"><span class="header-section-number">113</span> Understand data with plots</a></li>
<li><a class="" href="r-and-python-visualization.html"><span class="header-section-number">114</span> R and Python visualization</a></li>
<li><a class="" href="d-visualization-with-rgl-and-scatterplot3d.html"><span class="header-section-number">115</span> 3D Visualization with rgl and scatterplot3d</a></li>
<li><a class="" href="base-r-vs.-ggplot2-visualization.html"><span class="header-section-number">116</span> Base r vs. ggplot2 visualization</a></li>
<li class="book-part">Custom R Package</li>
<li><a class="" href="super-ggformat.html"><span class="header-section-number">117</span> Super ggformat</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">118</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">119</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc21fall2">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="predictive-analytics-using-data-visualization-in-r" class="section level1">
<h1>
<span class="header-section-number">104</span> Predictive Analytics using Data Visualization in R<a class="anchor" aria-label="anchor" href="#predictive-analytics-using-data-visualization-in-r"><i class="fas fa-link"></i></a>
</h1>
<p>Rahulraj Singh</p>
<div class="sourceCode" id="cb1458"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This external GitHub installation is needed to import the makeR library</span>
<span class="co"># require(devtools)</span>
<span class="co">#   install_github("jbryer/makeR")</span></code></pre></div>
<div id="building-a-trading-strategy-and-an-optimal-fund-allocation-mechanism-powered-by-dataviz" class="section level2">
<h2>
<span class="header-section-number">104.1</span> Building a Trading Strategy and an optimal Fund Allocation Mechanism, powered by DataViz!<a class="anchor" aria-label="anchor" href="#building-a-trading-strategy-and-an-optimal-fund-allocation-mechanism-powered-by-dataviz"><i class="fas fa-link"></i></a>
</h2>
<p>In the tutorial below, I will walk through the complete process of using Data Visualization concepts in R to build a trading strategy. Along the way I will also introduce concepts about Time Series analysis, data stationary and perform predictions. But there are obviously no prerequisites for understanding these series of R code.</p>
<div id="lets-get-started-on-building-our-own-day-trading-guide." class="section level3">
<h3>
<span class="header-section-number">104.1.1</span> Let’s get started on building our own day-trading guide.<a class="anchor" aria-label="anchor" href="#lets-get-started-on-building-our-own-day-trading-guide."><i class="fas fa-link"></i></a>
</h3>
<p>For this tutorial, I will be taking the example of the Apple Inc. stock (ticker: AAPL) (credits for this go to Professor Kosrow Dehnad, who introduced us to AAPL in the Finance and Structuring class)</p>
<p>In the below code chunk, I am gathering data for AAPL, sourcing it directly from Yahoo, for the last 8 months. (Please note: No trading algorithm can function optimally on only 6-8 months of data. If using this algorithm to build your trading strategy, kindly use at least 5 years worth of data)</p>
<div class="sourceCode" id="cb1459"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">getSymbols</span><span class="op">(</span><span class="st">"AAPL"</span>, src<span class="op">=</span><span class="st">"yahoo"</span>, from<span class="op">=</span><span class="st">"2021-03-01"</span>, to<span class="op">=</span><span class="st">"2021-10-31"</span>, auto.assign<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/zoo/man/index.html">index</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="va">data</span>, row.names<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></code></pre></div>
<pre><code>##         date AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted
## 1 2021-03-01    123.75    127.93   122.79     127.79   116307900      127.1968
## 2 2021-03-02    128.41    128.72   125.01     125.12   102260900      124.5392
## 3 2021-03-03    124.81    125.71   121.84     122.06   112966300      121.4934
## 4 2021-03-04    121.75    123.60   118.62     120.13   178155000      119.5724
## 5 2021-03-05    120.98    121.94   117.57     121.42   153766600      120.8564
## 6 2021-03-08    120.93    121.00   116.21     116.36   154376600      115.8199</code></pre>
</div>
<div id="plots-to-study-the-trends-in-the-market-exploratory-data-analysis" class="section level3">
<h3>
<span class="header-section-number">104.1.2</span> Plots to study the trends in the market (Exploratory Data Analysis)<a class="anchor" aria-label="anchor" href="#plots-to-study-the-trends-in-the-market-exploratory-data-analysis"><i class="fas fa-link"></i></a>
</h3>
<p>In the next few sections, I will walk through some plots to study the basic trends in the market revolving around AAPL.</p>
<div class="sourceCode" id="cb1461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/urca/man/plot-methods.html">plot</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Close</span>, main <span class="op">=</span> <span class="st">"Closing Prices of AAPL from April 2021"</span>, ylab<span class="op">=</span><span class="st">"Apple Close Price"</span>, x<span class="op">=</span><span class="va">df</span><span class="op">$</span><span class="va">date</span>, xlab<span class="op">=</span><span class="st">"Date"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Simple%20Plots%201-1.png" width="672" style="display: block; margin: auto;"></div>
<ol style="list-style-type: decimal">
<li>Scatter Plot: The above visual shows us the closing prices of the stock in the last 5 months. We can clearly observe that The April-May period was a hump which resulted prices to reach their lowest in May-June. The highest closing can be seen in September post which we see a gradual drop again.</li>
</ol>
<div class="sourceCode" id="cb1462"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cs_chart</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/plot_ly.html">plot_ly</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">~</span><span class="va">df</span><span class="op">$</span><span class="va">date</span>, type<span class="op">=</span><span class="st">"candlestick"</span>,
          open <span class="op">=</span> <span class="op">~</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Open</span>, close <span class="op">=</span> <span class="op">~</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Close</span>, high <span class="op">=</span> <span class="op">~</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.High</span>, low <span class="op">=</span> <span class="op">~</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Low</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/pkg/plotly/man/layout.html">layout</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Apple - Last 8 Months'</span>, plot_bgcolor <span class="op">=</span> <span class="st">"#e5ecf6"</span>, xaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Dates'</span><span class="op">)</span>, 
         yaxis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'Pricing Data'</span><span class="op">)</span><span class="op">)</span>
<span class="va">cs_chart</span></code></pre></div>
<div id="htmlwidget-9f9ab5f0205862f095ae" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9f9ab5f0205862f095ae">{"x":{"visdat":{"50cf40318486":["function () ","plotlyVisDat"]},"cur_data":"50cf40318486","attrs":{"50cf40318486":{"x":{},"open":{},"close":{},"high":{},"low":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"candlestick"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Apple - Last 8 Months","plot_bgcolor":"#e5ecf6","xaxis":{"domain":[0,1],"automargin":true,"title":"Dates"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Pricing Data"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2021-03-01","2021-03-02","2021-03-03","2021-03-04","2021-03-05","2021-03-08","2021-03-09","2021-03-10","2021-03-11","2021-03-12","2021-03-15","2021-03-16","2021-03-17","2021-03-18","2021-03-19","2021-03-22","2021-03-23","2021-03-24","2021-03-25","2021-03-26","2021-03-29","2021-03-30","2021-03-31","2021-04-01","2021-04-05","2021-04-06","2021-04-07","2021-04-08","2021-04-09","2021-04-12","2021-04-13","2021-04-14","2021-04-15","2021-04-16","2021-04-19","2021-04-20","2021-04-21","2021-04-22","2021-04-23","2021-04-26","2021-04-27","2021-04-28","2021-04-29","2021-04-30","2021-05-03","2021-05-04","2021-05-05","2021-05-06","2021-05-07","2021-05-10","2021-05-11","2021-05-12","2021-05-13","2021-05-14","2021-05-17","2021-05-18","2021-05-19","2021-05-20","2021-05-21","2021-05-24","2021-05-25","2021-05-26","2021-05-27","2021-05-28","2021-06-01","2021-06-02","2021-06-03","2021-06-04","2021-06-07","2021-06-08","2021-06-09","2021-06-10","2021-06-11","2021-06-14","2021-06-15","2021-06-16","2021-06-17","2021-06-18","2021-06-21","2021-06-22","2021-06-23","2021-06-24","2021-06-25","2021-06-28","2021-06-29","2021-06-30","2021-07-01","2021-07-02","2021-07-06","2021-07-07","2021-07-08","2021-07-09","2021-07-12","2021-07-13","2021-07-14","2021-07-15","2021-07-16","2021-07-19","2021-07-20","2021-07-21","2021-07-22","2021-07-23","2021-07-26","2021-07-27","2021-07-28","2021-07-29","2021-07-30","2021-08-02","2021-08-03","2021-08-04","2021-08-05","2021-08-06","2021-08-09","2021-08-10","2021-08-11","2021-08-12","2021-08-13","2021-08-16","2021-08-17","2021-08-18","2021-08-19","2021-08-20","2021-08-23","2021-08-24","2021-08-25","2021-08-26","2021-08-27","2021-08-30","2021-08-31","2021-09-01","2021-09-02","2021-09-03","2021-09-07","2021-09-08","2021-09-09","2021-09-10","2021-09-13","2021-09-14","2021-09-15","2021-09-16","2021-09-17","2021-09-20","2021-09-21","2021-09-22","2021-09-23","2021-09-24","2021-09-27","2021-09-28","2021-09-29","2021-09-30","2021-10-01","2021-10-04","2021-10-05","2021-10-06","2021-10-07","2021-10-08","2021-10-11","2021-10-12","2021-10-13","2021-10-14","2021-10-15","2021-10-18","2021-10-19","2021-10-20","2021-10-21","2021-10-22","2021-10-25","2021-10-26","2021-10-27","2021-10-28","2021-10-29"],"open":[123.75,128.410004,124.809998,121.75,120.980003,120.93,119.029999,121.690002,122.540001,120.400002,121.410004,125.699997,124.050003,122.879997,119.900002,120.330002,123.330002,122.82,119.540001,120.349998,121.650002,120.110001,121.650002,123.660004,123.870003,126.5,125.830002,128.949997,129.800003,132.520004,132.440002,134.940002,133.820007,134.300003,133.509995,135.020004,132.360001,133.039993,132.160004,134.830002,135.009995,134.309998,136.470001,131.779999,132.039993,131.190002,129.199997,127.889999,130.850006,129.410004,123.5,123.400002,124.580002,126.25,126.82,126.559998,123.160004,125.230003,127.82,126.010002,127.82,126.959999,126.440002,125.57,125.080002,124.279999,124.68,124.07,126.169998,126.599998,127.209999,127.019997,126.529999,127.82,129.940002,130.369995,129.800003,130.710007,130.300003,132.130005,133.770004,134.449997,133.460007,133.410004,134.800003,136.169998,136.600006,137.899994,140.070007,143.539993,141.580002,142.75,146.210007,144.029999,148.100006,149.240005,148.460007,143.75,143.460007,145.529999,145.940002,147.550003,148.270004,149.119995,144.809998,144.690002,144.380005,146.360001,145.809998,147.270004,146.979996,146.350006,146.199997,146.440002,146.050003,146.190002,148.970001,148.539993,150.229996,149.800003,145.029999,147.440002,148.309998,149.449997,149.809998,148.350006,147.479996,149,152.660004,152.830002,153.869995,153.759995,154.970001,156.979996,155.490005,155,150.630005,150.350006,148.559998,148.440002,148.820007,143.800003,143.929993,144.449997,146.649994,145.660004,145.470001,143.25,142.470001,143.660004,141.899994,141.759995,139.490005,139.470001,143.059998,144.029999,142.270004,143.229996,141.240005,142.110001,143.770004,143.449997,147.009995,148.699997,148.809998,149.690002,148.679993,149.330002,149.360001,149.820007,147.220001],"close":[127.790001,125.120003,122.059998,120.129997,121.419998,116.360001,121.089996,119.980003,121.959999,121.029999,123.989998,125.57,124.760002,120.529999,119.989998,123.389999,122.540001,120.089996,120.589996,121.209999,121.389999,119.900002,122.150002,123,125.900002,126.209999,127.900002,130.360001,133,131.240005,134.429993,132.029999,134.5,134.160004,134.839996,133.110001,133.5,131.940002,134.320007,134.720001,134.389999,133.580002,133.479996,131.460007,132.539993,127.849998,128.100006,129.740005,130.210007,126.849998,125.910004,122.769997,124.970001,127.449997,126.269997,124.849998,124.690002,127.309998,125.43,127.099998,126.900002,126.849998,125.279999,124.610001,124.279999,125.059998,123.540001,125.889999,125.900002,126.739998,127.129997,126.110001,127.349998,130.479996,129.639999,130.149994,131.789993,130.460007,132.300003,133.979996,133.699997,133.410004,133.110001,134.779999,136.330002,136.960007,137.270004,139.960007,142.020004,144.570007,143.240005,145.110001,144.5,145.639999,149.149994,148.479996,146.389999,142.449997,146.149994,145.399994,146.800003,148.559998,148.990005,146.770004,144.979996,145.639999,145.860001,145.520004,147.360001,146.949997,147.059998,146.139999,146.089996,145.600006,145.860001,148.889999,149.100006,151.119995,150.190002,146.360001,146.699997,148.190002,149.710007,149.619995,148.360001,147.539993,148.600006,153.119995,151.830002,152.509995,153.649994,154.300003,156.690002,155.110001,154.070007,148.970001,149.550003,148.119995,149.029999,148.789993,146.059998,142.940002,143.429993,145.850006,146.830002,146.919998,145.369995,141.910004,142.830002,141.5,142.649994,139.139999,141.110001,142,143.289993,142.899994,142.809998,141.509995,140.910004,143.759995,144.839996,146.550003,148.759995,149.259995,149.479996,148.690002,148.639999,149.320007,148.850006,152.570007,149.800003],"high":[127.93,128.720001,125.709999,123.599998,121.940002,121,122.059998,122.169998,123.209999,121.169998,124,127.220001,125.860001,123.18,121.43,123.870003,124.239998,122.900002,121.660004,121.480003,122.580002,120.400002,123.519997,124.18,126.160004,127.129997,127.919998,130.389999,133.039993,132.850006,134.660004,135,135,134.669998,135.470001,135.529999,133.75,134.149994,135.119995,135.059998,135.410004,135.020004,137.070007,133.559998,134.070007,131.490005,130.449997,129.75,131.259995,129.539993,126.269997,124.639999,126.150002,127.889999,126.93,126.989998,124.919998,127.720001,128,127.940002,128.320007,127.389999,127.639999,125.800003,125.349998,125.239998,124.849998,126.160004,126.32,128.460007,127.75,128.190002,127.440002,130.539993,130.600006,130.889999,132.550003,131.509995,132.410004,134.080002,134.320007,134.639999,133.889999,135.25,136.490005,137.410004,137.330002,140,143.149994,144.889999,144.059998,145.649994,146.320007,147.460007,149.570007,150,149.759995,144.070007,147.100006,146.130005,148.199997,148.720001,149.830002,149.210007,146.970001,146.550003,146.330002,146.949997,148.039993,147.789993,147.839996,147.110001,146.699997,147.710007,146.720001,149.050003,149.440002,151.190002,151.679993,150.720001,148,148.5,150.190002,150.860001,150.320007,149.119995,148.75,153.490005,152.800003,154.979996,154.720001,154.630005,157.259995,157.039993,156.110001,155.479996,151.419998,151.070007,149.440002,148.970001,148.820007,144.839996,144.600006,146.429993,147.080002,147.470001,145.960007,144.75,144.449997,144.380005,142.919998,142.210007,142.240005,142.149994,144.220001,144.179993,144.809998,143.25,141.399994,143.880005,144.899994,146.839996,149.169998,149.75,149.639999,150.179993,149.369995,150.839996,149.729996,153.169998,149.940002],"low":[122.790001,125.010002,121.839996,118.620003,117.57,116.209999,118.790001,119.449997,121.260002,119.160004,120.419998,124.720001,122.339996,120.32,119.68,120.260002,122.139999,120.07,119,118.919998,120.730003,118.860001,121.150002,122.489998,123.07,125.650002,125.139999,128.520004,129.470001,130.630005,131.929993,131.660004,133.639999,133.279999,133.339996,131.809998,131.300003,131.410004,132.160004,133.559998,134.110001,133.080002,132.449997,131.070007,131.830002,126.699997,127.970001,127.129997,129.479996,126.809998,122.769997,122.25,124.260002,125.849998,125.169998,124.779999,122.860001,125.099998,125.209999,125.940002,126.32,126.419998,125.080002,124.550003,123.940002,124.050003,123.129997,123.849998,124.830002,126.209999,126.519997,125.940002,126.099998,127.07,129.389999,128.460007,129.649994,130.240005,129.210007,131.619995,133.229996,132.929993,132.809998,133.350006,134.350006,135.869995,135.759995,137.75,140.070007,142.660004,140.669998,142.649994,144,143.630005,147.679993,147.089996,145.880005,141.669998,142.960007,144.630005,145.809998,146.919998,147.699997,145.550003,142.539993,144.580002,144.110001,145.25,145.179993,146.279999,146.169998,145.630005,145.520004,145.300003,145.529999,145.839996,148.270004,146.470001,149.089996,146.149994,144.5,146.779999,147.889999,149.149994,147.800003,147.509995,146.830002,148.610001,151.289993,152.339996,152.399994,153.089996,154.389999,153.979996,153.949997,148.699997,148.75,146.910004,146.369995,147.220001,145.759995,141.270004,142.779999,143.699997,145.639999,145.559998,143.820007,141.690002,142.029999,141.279999,139.110001,138.270004,139.360001,138.369995,142.720001,142.559998,141.809998,141.039993,139.199997,141.509995,143.509995,143.160004,146.550003,148.119995,147.869995,148.639999,147.619995,149.009995,148.490005,149.720001,146.410004],"type":"candlestick","line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><ol start="2" style="list-style-type: decimal">
<li>Candlestick Charts: In a general financial analysis, candlestick charts are used to understand the market’s sentiment. These give day traders a detailed reading of how the stock performed every day which in turn speaks about the market’s sentiment with regard to the stock. In the case of Apple, we see an evenly distributed chart which tells that investors are stable about trading Apple. Except for one day on September 10, when we see a wide gap between the high and low.
These charts are created using plotly and are interactive.</li>
</ol>
<div class="sourceCode" id="cb1463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">date</span>, y<span class="op">=</span><span class="va">AAPL.Adjusted</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="va">lm</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Volume of Shares"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Simple%20Plots%203-1.png" width="672" style="display: block; margin: auto;"></div>
<ol start="3" style="list-style-type: decimal">
<li>Scatter Plot: To study the amount of day trades being executed on a day-to-day basis, we read the scatter plot against adjusted close prices. This shows a regular periodic rise in the stock price from Apple.</li>
</ol>
<div class="sourceCode" id="cb1464"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">AAPL.Volume</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>xend <span class="op">=</span> <span class="va">date</span>, yend <span class="op">=</span> <span class="fl">0</span>, color <span class="op">=</span> <span class="va">AAPL.Volume</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"loess"</span>, se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"AAPL Volume Chart"</span>, 
         subtitle <span class="op">=</span> <span class="st">"Charting Daily Volume"</span>, 
         y <span class="op">=</span> <span class="st">"Volume"</span>, x <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_tq</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Advanced%20Plots%203-1.png" width="672" style="display: block; margin: auto;"></div>
<ol start="4" style="list-style-type: decimal">
<li>Bar Charts: Study of Volume of trades in a day-trade. The data for AAPL shows that the trading is diversified and does not show us any trends or patterns of trade volumes, irrespective of price. This shows us an important trade about the company’s stock, that the investor’s trust is not factored or affected by the price of the stock, for this company.</li>
</ol>
<p>There are some distinct plots that are used in the finance industry to read and understand the movement of the market. Let’s walk through these charts.</p>
<div class="sourceCode" id="cb1465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">chartSeries</span><span class="op">(</span><span class="va">data</span>, name<span class="op">=</span><span class="st">'AAPL (From April 2021 to October 2021)'</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Advanced%20Plots%201-1.png" width="672" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb1466"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">addMACD</span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Advanced%20Plots%201-2.png" width="672" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb1467"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">addBBands</span><span class="op">(</span><span class="op">)</span> </code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Advanced%20Plots%201-3.png" width="672" style="display: block; margin: auto;"></div>
<ol start="5" style="list-style-type: decimal">
<li>The Bollinger Band: A key analysis tool for any security is the Bollinger band. It is comprised of three lines, a simple moving average (middle band), an upper and a lower band.
The squeeze is an important indicator shown by the Bollinger band. When the bands come close, it is called a squeeze. This indicates that the moving average is constricting. It is period of low volatility and is an indication of future trading opportunities.
In Apple’s case above, we see the squeeze in June and September, those are the best periods to day-trade on Apple stocks.</li>
</ol>
<div class="sourceCode" id="cb1468"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">ma7</span> <span class="op">=</span> <span class="fu">ma</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Adjusted</span>, order<span class="op">=</span><span class="fl">7</span><span class="op">)</span>
<span class="va">df</span><span class="op">$</span><span class="va">ma30</span> <span class="op">=</span> <span class="fu">ma</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Adjusted</span>, order<span class="op">=</span><span class="fl">30</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">AAPL.Adjusted</span>, color <span class="op">=</span> <span class="st">"Daily Price"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">ma7</span>,   color <span class="op">=</span> <span class="st">"Weekly Moving Average"</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">ma30</span>, color <span class="op">=</span> <span class="st">"Monthly Moving Average"</span><span class="op">)</span><span class="op">)</span>  <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">'AAPL Stock Price'</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">'Time'</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">'Trendline'</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Advanced%20Plots%202-1.png" width="672" style="display: block; margin: auto;"></div>
<ol start="6" style="list-style-type: decimal">
<li>Multi-Line Chart: The graph above is bifurcated based on the daily price, a weekly moving average and a monthly moving average. MA is a significant measure of movement in stock prices that shows a period of volatility. We observe above that in the month of September, the stock prices go strongly above the monthly moving average showing signs of high volatility. These periods could be potential trade opportunities for day traders but come with the “high risk high reward” note.</li>
</ol>
<div class="sourceCode" id="cb1469"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">returns</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ticker</span>, <span class="va">start_year</span><span class="op">)</span> 
  <span class="op">{</span>
    <span class="va">symbol</span> <span class="op">&lt;-</span> <span class="fu">getSymbols</span><span class="op">(</span><span class="va">ticker</span>, src <span class="op">=</span> <span class="st">'yahoo'</span>, auto.assign <span class="op">=</span> <span class="cn">FALSE</span>, warnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
    <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">periodReturn</span><span class="op">(</span><span class="va">symbol</span>, period <span class="op">=</span> <span class="st">'monthly'</span>, subset<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">start_year</span>, <span class="st">"::"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'log'</span><span class="op">)</span>
    <span class="fu"><a href="https://rdrr.io/r/base/assign.html">assign</a></span><span class="op">(</span><span class="va">ticker</span>, <span class="va">data</span>, <span class="va">.GlobalEnv</span><span class="op">)</span>
  <span class="op">}</span>
<span class="va">re</span> <span class="op">=</span> <span class="fu">returns</span><span class="op">(</span><span class="st">'AAPL'</span>, <span class="fl">2015</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/hist.html">hist</a></span><span class="op">(</span><span class="va">re</span>, main<span class="op">=</span> <span class="st">"Return on Investment for AAPL"</span>, xlab<span class="op">=</span><span class="st">"Rate of Return"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/density.html">density</a></span><span class="op">(</span><span class="va">re</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Plots%207-1.png" width="672" style="display: block; margin: auto;"></div>
<ol start="7" style="list-style-type: decimal">
<li>Histogram: The above graph shows us how the return on investing in Apple has been for the last 6 years. This rate is important to understand the pattern of growth of the company’s stock value. We see that the rate of return has gradually improved in recent years which shows positive confidence in the stock.</li>
</ol>
</div>
</div>
<div id="implementation-of-prdictive-analytics-in-stock-prices" class="section level2">
<h2>
<span class="header-section-number">104.2</span> Implementation of Prdictive Analytics in Stock Prices<a class="anchor" aria-label="anchor" href="#implementation-of-prdictive-analytics-in-stock-prices"><i class="fas fa-link"></i></a>
</h2>
<div id="what-is-predictive-analytics-and-how-does-it-come-up-in-trading-strategies" class="section level3">
<h3>
<span class="header-section-number">104.2.1</span> What is Predictive Analytics and how does it come up in Trading Strategies?<a class="anchor" aria-label="anchor" href="#what-is-predictive-analytics-and-how-does-it-come-up-in-trading-strategies"><i class="fas fa-link"></i></a>
</h3>
<p>In my words, the science of assimilating the future behavior of an object is Predictive Analytics. It’s application in Finance is heavy, since traders base their strategies on the study of market forecast. It is often not a concrete output and no trading strategy can ever be based only on an algorithm, but predictions help in building cognitive strategies.</p>
<p>Forecasting time series deals with predicting the next cycle or observation of events that would occur in a future-referenced time frame.</p>
<div id="augmented-dickey-fuller-test-for-stationarity" class="section level4">
<h4>
<span class="header-section-number">104.2.1.1</span> Augmented Dickey-Fuller Test for Stationarity<a class="anchor" aria-label="anchor" href="#augmented-dickey-fuller-test-for-stationarity"><i class="fas fa-link"></i></a>
</h4>
<p>The Augmented Dickey-Fuller test (ADF), also known as the Ad-Fuller Test is an important testing mechanism in respect to Time Series Analysis. It tests a basic null hypothesis that a given input unit root is present in the entire time series sample. The alternative hypothesis is usually stationarity or trend stationarity of the series.</p>
<p>The augmented Dickey–Fuller (ADF) statistic, that is predominantly used in this test, is a negative number. The more negative it is, the stronger the rejection of the hypothesis that there is a unit root at some level of confidence.</p>
<p>The inspiration behind the Ad-Fuller test is that, if the time series is characterized by a unit root process, then in that case the lagged level of the series (y-1) will not yield any relevant information in predicting future changes in (y) except for those changes that were observed in the delta of (y-1). In such cases, the null hypothesis is not rejected. On the other side, if the existing process has no unit root, that states that it is stationary and therefore shows a reversion to the mean. Here, the lagged level will provide relevant information in forecasting future changes.</p>
<div class="sourceCode" id="cb1470"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu">adf.test</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Close</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## 
##  Augmented Dickey-Fuller Test
## 
## data:  df$AAPL.Close
## Dickey-Fuller = -1.952, Lag order = 5, p-value = 0.5963
## alternative hypothesis: stationary</code></pre>
</div>
<div id="seasonality-in-time-series-data" class="section level4">
<h4>
<span class="header-section-number">104.2.1.2</span> Seasonality in Time Series Data<a class="anchor" aria-label="anchor" href="#seasonality-in-time-series-data"><i class="fas fa-link"></i></a>
</h4>
<p>Seasonality in time series data is the presence of variations that occur at specific intervals of time that is less than a year. These intervals can be hourly, monthly, weekly, or quarterly. Various considerations such as weather or climatic changes can cause seasonality.
Patterns causing Seasonality are always cyclic and occur in periodic patterns.</p>
<div class="sourceCode" id="cb1472"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span><span class="op">$</span><span class="va">ma7</span> <span class="op">=</span> <span class="fu">ma</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Adjusted</span>, order<span class="op">=</span><span class="fl">7</span><span class="op">)</span>
<span class="va">price_ma</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/ts.html">ts</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">ma7</span><span class="op">)</span>, frequency<span class="op">=</span><span class="fl">30</span><span class="op">)</span>
<span class="va">decomp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/stl.html">stl</a></span><span class="op">(</span><span class="va">price_ma</span>, s.window<span class="op">=</span><span class="st">"periodic"</span>, robust <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/urca/man/plot-methods.html">plot</a></span><span class="op">(</span><span class="va">decomp</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/TS%20Decomposition-1.png" width="672" style="display: block; margin: auto;"></div>
<p>As we can see, there does not seem to be any apparent periodicity in the Apple stock price trades in our 8 months time period.</p>
</div>
<div id="autocorrelation-and-partial-correlation" class="section level4">
<h4>
<span class="header-section-number">104.2.1.3</span> Autocorrelation and Partial Correlation<a class="anchor" aria-label="anchor" href="#autocorrelation-and-partial-correlation"><i class="fas fa-link"></i></a>
</h4>
<p>Autocorrelation: The correlation between the series and its lags is called autocorrelation. Like correlation that measures the magnitude to which a linear relationship is associated between two variables, autocorrelation does the same between lagged values of a time series. If the series is considerably autocorrelated, it means that the impact of lags on forecasting the time series is high. In more general terms, a correlation factor of 1 (Lag = 1) conveys the correlation between values that are one period apart from each other. Likewise, lag ‘k’ autocorrelation shows the association amongst values that are ‘k’ time periods separately from each other.</p>
<p>Partial Autocorrelation: The purpose of partial autocorrelation is also like autocorrelation as it conveys the information about the relationship between a variable and its lag. But partial autocorrelation only delivers details about the pure association between the lag and disregards correlations that occur from intermediate lags.</p>
<div class="sourceCode" id="cb1473"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span><span class="op">)</span>
<span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/zoo/man/index.html">index</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="va">data</span>, row.names<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span>
<span class="va">series</span> <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">AAPL.Close</span>
<span class="fu">Acf</span><span class="op">(</span>
  <span class="va">series</span>,
  lag.max <span class="op">=</span> <span class="cn">NULL</span>,
  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"correlation"</span>, <span class="st">"covariance"</span>, <span class="st">"partial"</span><span class="op">)</span>,
  plot <span class="op">=</span> <span class="cn">TRUE</span>,
  na.action <span class="op">=</span> <span class="va">na.contiguous</span>,
  demean <span class="op">=</span> <span class="cn">TRUE</span>,
  main <span class="op">=</span> <span class="st">"ACF Series Plot"</span>
<span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/test-1.png" width="672" style="display: block; margin: auto;"></div>
<p>While reading data from the ACF plot for Apple, we see a gradual decay in the lags. This decay is an indication of significant closing values at each time interval confirming that our hypothesis from the Augmented Dickey Fuller test was correct.</p>
<div class="sourceCode" id="cb1474"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">8</span><span class="op">)</span><span class="op">)</span>
<span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/zoo/man/index.html">index</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span>, <span class="va">data</span>, row.names<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span>
<span class="va">series</span> <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">AAPL.Close</span>
<span class="fu">Pacf</span><span class="op">(</span>
  <span class="va">series</span>,
  lag.max <span class="op">=</span> <span class="cn">NULL</span>,
  plot <span class="op">=</span> <span class="cn">TRUE</span>,
  na.action <span class="op">=</span> <span class="va">na.contiguous</span>,
  demean <span class="op">=</span> <span class="cn">TRUE</span>,
  main <span class="op">=</span> <span class="st">"PACF Series Plot"</span>
<span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/etst-1.png" width="672" style="display: block; margin: auto;"></div>
<p>While reading the PACF plot for Apple, we notice that the lag order is high at the start but then moves in geometric progression throughout the timeline. The periodic changing movements in the lag of the PACF plot confirm that this is the seasonal component of data and any changing prices can be used to build the ARIMA model. Had this been a flat line across all time frames, this data would not have yielded any results in the ARIMA forecast.</p>
</div>
</div>
</div>
<div id="arima---autoregresive-integrating-moving-average" class="section level2">
<h2>
<span class="header-section-number">104.3</span> ARIMA - Autoregresive Integrating Moving Average<a class="anchor" aria-label="anchor" href="#arima---autoregresive-integrating-moving-average"><i class="fas fa-link"></i></a>
</h2>
<p>A general term in the statistics and economics world, auto regressive integrated moving average (ARIMA) is used to describe a moving average construct. These have found great interest in building Time Series forecasting models.</p>
<p>ARIMA models are applied to instances where the input data shows evidence of non-stationarity in the sense of mean, but there is no significant variance observed.</p>
<p>We can break the definition of ARIMA as follows, the AR part of ARIMA stands for an evolving variable that is regressed on its self-lag (old values). The MA part shows the regression error that is a linear combination of error terms that have occurred at various times in the past. The remaining “I” (integrated) indicated that the data got replaced with differences between current and previous values. These individual processes may have to be performed multiple times. The purpose of each of these features is to make the model fit the data as well as possible.</p>
<div class="sourceCode" id="cb1475"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">modelfit</span> <span class="op">&lt;-</span> <span class="fu">auto.arima</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">AAPL.Close</span>, stepwise <span class="op">=</span> <span class="cn">TRUE</span>, lambda <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
<span class="va">modelfit</span></code></pre></div>
<pre><code>## Series: df$AAPL.Close 
## ARIMA(3,1,1) with drift 
## 
## Coefficients:
##           ar1    ar2      ar3     ma1   drift
##       -0.4559  6e-04  -0.1774  0.3877  0.1373
## s.e.   0.3188  9e-02   0.0890  0.3208  0.1201
## 
## sigma^2 estimated as 3.481:  log likelihood=-344.79
## AIC=701.58   AICc=702.09   BIC=720.39</code></pre>
<p>Now that our model is ready, we will forecast the prices for the next 60 days.</p>
<div class="sourceCode" id="cb1477"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">price_forecast</span> <span class="op">&lt;-</span> <span class="fu">forecast</span><span class="op">(</span><span class="va">modelfit</span>, h<span class="op">=</span><span class="fl">60</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/urca/man/plot-methods.html">plot</a></span><span class="op">(</span><span class="va">price_forecast</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/predict-1.png" width="672" style="display: block; margin: auto;"></div>
<p>The above prediction can be read as follows:
1. The blue line represents the mean of our prediction.
2. The darker shaded region around the blue line represents an 80% confidence interval.
3. The light shaded outer portion represents a 95% confidence interval.</p>
</div>
<div id="comparing-predictions-with-actual-stock-prices" class="section level2">
<h2>
<span class="header-section-number">104.4</span> Comparing predictions with Actual Stock Prices<a class="anchor" aria-label="anchor" href="#comparing-predictions-with-actual-stock-prices"><i class="fas fa-link"></i></a>
</h2>
<p>To conclude the predictive analytics tutorial, let us match out our generated predictions to the real stock closing prices from October 10 to October 31, 2021.</p>
<div class="sourceCode" id="cb1478"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu">getSymbols</span><span class="op">(</span><span class="st">"AAPL"</span>, src<span class="op">=</span><span class="st">"yahoo"</span>, from<span class="op">=</span><span class="st">"2021-10-10"</span>, to<span class="op">=</span><span class="st">"2021-10-31"</span>, auto.assign<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>
<span class="va">df2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/zoo/man/index.html">index</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span>, <span class="va">data2</span>, row.names<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span>
<span class="va">present</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.vector</a></span><span class="op">(</span><span class="va">df2</span><span class="op">$</span><span class="va">AAPL.Close</span><span class="op">)</span>
<span class="va">meanvalues</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.matrix.html">as.vector</a></span><span class="op">(</span><span class="va">price_forecast</span><span class="op">$</span><span class="va">mean</span><span class="op">)</span>

<span class="va">x</span>  <span class="op">&lt;-</span> <span class="va">df2</span><span class="op">$</span><span class="va">date</span>
<span class="va">y1</span> <span class="op">&lt;-</span> <span class="va">present</span>
<span class="va">y2</span> <span class="op">&lt;-</span> <span class="va">meanvalues</span><span class="op">[</span><span class="fl">15</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span>
<span class="va">df_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y1</span>,<span class="va">y2</span><span class="op">)</span>

<span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df_new</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">y1</span><span class="op">)</span>, colour<span class="op">=</span><span class="st">"red"</span><span class="op">)</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">y2</span><span class="op">)</span>, colour<span class="op">=</span><span class="st">"green"</span><span class="op">)</span>
<span class="va">g</span> <span class="op">&lt;-</span> <span class="va">g</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"X"</span><span class="op">)</span>
<span class="va">g</span></code></pre></div>
<div class="inline-figure"><img src="predictive-analytics-r_files/figure-html/Values-1.png" width="672" style="display: block; margin: auto;"></div>
<p>On matching we see that the mean of our predictions is extremely close to the actual value as we are moving forward in time. This should definitely instill some confidence within us about the way we structured this analysis and predictions. One important thing to note is that our prediction is for the next 30 days based on data from the last 8 months. Therefore, the previoud entries are not going to match. But as we converge towards the end of the graph, if the numbers start coming into the same pattern of movement, that is a positive sign.</p>
</div>
<div id="building-a-portfolio-of-stocks" class="section level2">
<h2>
<span class="header-section-number">104.5</span> Building a Portfolio of Stocks<a class="anchor" aria-label="anchor" href="#building-a-portfolio-of-stocks"><i class="fas fa-link"></i></a>
</h2>
<div id="how-to-decide-what-percentage-of-your-portfolio-should-be-invested-where" class="section level3">
<h3>
<span class="header-section-number">104.5.1</span> How to decide what percentage of your portfolio should be invested where?<a class="anchor" aria-label="anchor" href="#how-to-decide-what-percentage-of-your-portfolio-should-be-invested-where"><i class="fas fa-link"></i></a>
</h3>
<p>In managing finances, it is common knowledge that diversification yields better results. The idea is to not put all your eggs in one basket. So then how do you decide which baskets to choose and how to allocate funds?</p>
</div>
<div id="sharpe-ratio" class="section level3">
<h3>
<span class="header-section-number">104.5.2</span> Sharpe Ratio<a class="anchor" aria-label="anchor" href="#sharpe-ratio"><i class="fas fa-link"></i></a>
</h3>
<p>An important construct in deciding the best outcome of trading more than one stock is calculating the sharpe ratio. It tells you which pair and what percentage of fund allocation to which stock will yield the best outcome.</p>
<p>In the function below we will complete a few prerequisite steps to calculate the Sharpe Ratio:
1. Bring data for 3 stocks, historical data for the last 6 years.
2. Calculate their respective monthly return rates to summarize which stock gave what returns.
3. Merge their return into one data frame to further divide portions of the portfolio.</p>
<div class="sourceCode" id="cb1479"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">returns</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">ticker</span>, <span class="va">start_year</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">symbol</span> <span class="op">&lt;-</span> <span class="fu">getSymbols</span><span class="op">(</span><span class="va">ticker</span>, src <span class="op">=</span> <span class="st">'yahoo'</span>, auto.assign <span class="op">=</span> <span class="cn">FALSE</span>, warnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
  <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">periodReturn</span><span class="op">(</span><span class="va">symbol</span>, period <span class="op">=</span> <span class="st">'monthly'</span>, subset<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">start_year</span>, <span class="st">"::"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'log'</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/as.character.html">as.character</a></span><span class="op">(</span><span class="va">ticker</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/assign.html">assign</a></span><span class="op">(</span><span class="va">ticker</span>, <span class="va">data</span>, <span class="va">.GlobalEnv</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu">returns</span><span class="op">(</span><span class="st">'AAPL'</span>, <span class="fl">2015</span><span class="op">)</span>
<span class="fu">returns</span><span class="op">(</span><span class="st">'PFE'</span>, <span class="fl">2015</span><span class="op">)</span>
<span class="fu">returns</span><span class="op">(</span><span class="st">'TSLA'</span>, <span class="fl">2015</span><span class="op">)</span>

<span class="va">merged_returns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xts/man/merge.html">merge.xts</a></span><span class="op">(</span><span class="va">AAPL</span>, <span class="va">PFE</span>, <span class="va">TSLA</span><span class="op">)</span></code></pre></div>
<p>For this tutorial, I took data for Apple, Pfizer and Tesla. These stocks have been in the news for various reasons through the last few months, so let’s see how would our investment look should we want to invest in these stocks.</p>
<div class="sourceCode" id="cb1480"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/dygraphs/man/dygraph.html">dygraph</a></span><span class="op">(</span><span class="va">merged_returns</span>, main <span class="op">=</span> <span class="st">"Apple v/s Pfizer v/s Tesla"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/dygraphs/man/dyAxis.html">dyAxis</a></span><span class="op">(</span><span class="st">"y"</span>, label <span class="op">=</span> <span class="st">"Return Percentage"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/dygraphs/man/dyOptions.html">dyOptions</a></span><span class="op">(</span>colors <span class="op">=</span> <span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">"Set2"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-bc2670612c5b0acc458a" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-bc2670612c5b0acc458a">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"title":"Apple v/s Pfizer v/s Tesla","labels":["month","AAPL","PFE","TSLA"],"legend":"auto","retainDateWindow":false,"ylabel":"Return Percentage","stackedGraph":false,"fillGraph":false,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colors":["#66C2A5","#FC8D62","#8DA0CB"],"colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"disableZoom":false},"scale":"monthly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2015-01-30T00:00:00.000Z","2015-02-27T00:00:00.000Z","2015-03-31T00:00:00.000Z","2015-04-30T00:00:00.000Z","2015-05-29T00:00:00.000Z","2015-06-30T00:00:00.000Z","2015-07-31T00:00:00.000Z","2015-08-31T00:00:00.000Z","2015-09-30T00:00:00.000Z","2015-10-30T00:00:00.000Z","2015-11-30T00:00:00.000Z","2015-12-31T00:00:00.000Z","2016-01-29T00:00:00.000Z","2016-02-29T00:00:00.000Z","2016-03-31T00:00:00.000Z","2016-04-29T00:00:00.000Z","2016-05-31T00:00:00.000Z","2016-06-30T00:00:00.000Z","2016-07-29T00:00:00.000Z","2016-08-31T00:00:00.000Z","2016-09-30T00:00:00.000Z","2016-10-31T00:00:00.000Z","2016-11-30T00:00:00.000Z","2016-12-30T00:00:00.000Z","2017-01-31T00:00:00.000Z","2017-02-28T00:00:00.000Z","2017-03-31T00:00:00.000Z","2017-04-28T00:00:00.000Z","2017-05-31T00:00:00.000Z","2017-06-30T00:00:00.000Z","2017-07-31T00:00:00.000Z","2017-08-31T00:00:00.000Z","2017-09-29T00:00:00.000Z","2017-10-31T00:00:00.000Z","2017-11-30T00:00:00.000Z","2017-12-29T00:00:00.000Z","2018-01-31T00:00:00.000Z","2018-02-28T00:00:00.000Z","2018-03-29T00:00:00.000Z","2018-04-30T00:00:00.000Z","2018-05-31T00:00:00.000Z","2018-06-29T00:00:00.000Z","2018-07-31T00:00:00.000Z","2018-08-31T00:00:00.000Z","2018-09-28T00:00:00.000Z","2018-10-31T00:00:00.000Z","2018-11-30T00:00:00.000Z","2018-12-31T00:00:00.000Z","2019-01-31T00:00:00.000Z","2019-02-28T00:00:00.000Z","2019-03-29T00:00:00.000Z","2019-04-30T00:00:00.000Z","2019-05-31T00:00:00.000Z","2019-06-28T00:00:00.000Z","2019-07-31T00:00:00.000Z","2019-08-30T00:00:00.000Z","2019-09-30T00:00:00.000Z","2019-10-31T00:00:00.000Z","2019-11-29T00:00:00.000Z","2019-12-31T00:00:00.000Z","2020-01-31T00:00:00.000Z","2020-02-28T00:00:00.000Z","2020-03-31T00:00:00.000Z","2020-04-30T00:00:00.000Z","2020-05-29T00:00:00.000Z","2020-06-30T00:00:00.000Z","2020-07-31T00:00:00.000Z","2020-08-31T00:00:00.000Z","2020-09-30T00:00:00.000Z","2020-10-30T00:00:00.000Z","2020-11-30T00:00:00.000Z","2020-12-31T00:00:00.000Z","2021-01-29T00:00:00.000Z","2021-02-26T00:00:00.000Z","2021-03-31T00:00:00.000Z","2021-04-30T00:00:00.000Z","2021-05-28T00:00:00.000Z","2021-06-30T00:00:00.000Z","2021-07-30T00:00:00.000Z","2021-08-31T00:00:00.000Z","2021-09-30T00:00:00.000Z","2021-10-29T00:00:00.000Z","2021-11-18T00:00:00.000Z"],[0.0596116343279716,0.092077078004962,-0.0318743253182995,0.00576970909024331,0.0401729625302495,-0.0379381463714493,-0.0334809851104871,-0.073005147206613,-0.0220577391952946,0.0801124088473767,-0.0100925665748833,-0.11679028686991,-0.0782235546145406,-0.00669993744745158,0.119746072335825,-0.150731148377264,0.0632442552491222,-0.0435963850151077,0.0862352739469805,0.0179739516156013,0.063448188486615,0.0043249636360279,-0.0269587338799093,0.0468407979349729,0.0466416703749666,0.121229027489899,0.0475414648276651,-6.96947557928728e-05,0.0614883064380683,-0.0589158295778093,0.0321803481154933,0.0977338731140646,-0.0621349340200442,0.0924038321775694,0.016486723866344,-0.0153633370645446,-0.0106934070962346,0.0618921523094421,-0.0598038605785821,-0.0151336303493947,0.122893199460155,-0.00946292355731468,0.0275989393012256,0.179172339058854,-0.00833760908469295,-0.0309516562566834,-0.203395575901227,-0.124088546761042,0.0536867748193957,0.039523316498291,0.0926026339297458,0.0549009092229651,-0.136475828157579,0.12267696900333,0.0736169953098649,-0.0203904263995426,0.0704226367598792,0.104976445841553,0.0716959897492217,0.0942040048200566,0.0526018729024898,-0.124200878351541,-0.0723142327149281,0.144423906334433,0.0789634754180514,0.137486526991723,0.152834075659007,0.194233439725652,-0.108171479643587,-0.0618882377344557,0.0894809359402029,0.108471997488703,-0.00551669621431395,-0.0845618822696872,0.00731279693999119,0.0734528620065042,-0.0535138081037507,0.0945000955234294,0.0629583009087326,0.0401142226547472,-0.0704617699834312,0.0570013740265288,0.0524707867621852],[0.00320514248035131,0.0937088542921933,0.0136017969931637,-0.0250304631648279,0.0238800055240341,-0.0357390354319581,0.0727437036206969,-0.112596846993419,-0.0254610994416489,0.0739261098117948,-0.0315389135889898,-0.0150656310066282,-0.0570490401437995,-0.0272624102239207,-0.00101156286260275,0.0985560552007519,0.0590587352607887,0.0145904780553294,0.0466104115572159,-0.0583231187362017,-0.0270877527329891,-0.0658975846386494,0.0134693168185788,0.0105231339224302,-0.0233619114881238,0.0726211739425328,0.00263424561050995,-0.00851320922023371,-0.0381599365002923,0.028383528488487,-0.0128840213310622,0.0226604293428673,0.0511458913182027,-0.0180898504540516,0.0336544163534995,-0.00110382078200782,0.022386968525876,-0.0199052353625556,-0.0228422304558499,0.0310704440061161,-0.0187487888914815,0.0096940441497176,0.0958612914555061,0.0390472690334638,0.0596040937046957,-0.0231848288354211,0.071034490216556,-0.0574256825562887,-0.0278763467468142,0.02097976718644,-0.0205087686852556,-0.0447836064159074,0.0221608821319954,0.0424392604860189,-0.109163844835676,-0.0885104560140651,0.0106324357250347,0.0657033166425872,0.00390168288499974,0.0169888265083275,-0.0507829534760681,-0.10822891360812,-0.0236159938250069,0.161476715575614,-0.0044415397412767,-0.1551986602002,0.162763493665435,-0.0180940827123348,-0.0292677746352209,-0.0338075616309228,0.129334280142574,-0.0399414102579422,-0.0250322233529221,-0.0694904046791075,0.0786405583815553,0.0646593218728864,0.00206766674678859,0.0110413241356488,0.0891159258535733,0.0733902354319429,-0.0687293786529954,0.0168304606785276,0.161569645094055],[-0.0883651711980203,-0.00127787897666726,-0.0743500345024967,0.180226795866453,0.103899617137152,0.0673008507151787,-0.00789659985517795,-0.066366228325764,-0.00265348123367864,-0.182659729910067,0.106828441667093,0.0414715064918105,-0.227360515389606,0.00381072140155963,0.179948012508606,0.0467217998508498,-0.0755979566022905,-0.0502964485637888,0.100785316095675,-0.102058054238293,-0.0383664015152157,-0.0313645528359116,-0.0430412818686127,0.120665136108858,0.164624967579826,-0.00773037377679247,0.10727873146882,0.12091620654751,0.0822959712743525,0.0586544228221302,-0.11145989523835,0.0955434185786588,-0.0424740884330892,-0.0284574008142573,-0.0708625811268923,0.0080619591765528,0.129254554823017,-0.032266877159799,-0.253920410205453,0.0992546076360568,-0.0316982111622676,0.186043260377775,-0.140021464326795,0.0117374306140638,-0.130439066206022,0.242170484529243,0.0382716675335131,-0.0517619788728162,-0.0806288031395048,0.0410330809659405,-0.133656478597845,-0.159123860198297,-0.253945274762528,0.188012106327819,0.0780923857434954,-0.068516946031121,0.0654494796577671,0.268061285328612,0.0465921504001933,0.237359790145031,0.441578291584525,0.026424369437642,-0.24278154281371,0.400209607901726,0.0657304040021331,0.257108681647368,0.281420672064987,0.554719288863979,-0.149762203003956,-0.100371801702565,0.380308452716021,0.217730779027994,0.117343700950134,-0.161038225580463,-0.0112697902538093,0.0602925621006274,-0.12637238783181,0.0835480005921785,0.0109738461247707,0.0682241840132158,0.0526325945351016,0.362230253806701,-0.0159432931822088]],"fixedtz":false,"tzone":"UTC"},"evals":[],"jsHooks":[]}</script><p>The interactive line chart above shows us the individual return rates of the three stocks. It is evident that Tesla is the most volatile stock of the three. It is grown the largest, but at times has also shed losses in large numbers. At this moment, it looks like investing in TSLA could yield high results but comes with very high risk-ratio as well.</p>
<div class="sourceCode" id="cb1481"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">percAlloc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.25</span>, <span class="fl">.25</span>, <span class="fl">.50</span><span class="op">)</span>
<span class="va">portfolio_returns</span> <span class="op">&lt;-</span> <span class="fu">Return.portfolio</span><span class="op">(</span><span class="va">merged_returns</span>, weights <span class="op">=</span> <span class="va">percAlloc</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/dygraphs/man/dygraph.html">dygraph</a></span><span class="op">(</span><span class="va">portfolio_returns</span>, main <span class="op">=</span> <span class="st">"Portfolio Monthly Return"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/dygraphs/man/dyAxis.html">dyAxis</a></span><span class="op">(</span><span class="st">"y"</span>, label <span class="op">=</span> <span class="st">"Return Percentage"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-578269282a94ed9e6e3f" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-578269282a94ed9e6e3f">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60},"y":[]},"title":"Portfolio Monthly Return","labels":["month","portfolio.returns"],"legend":"auto","retainDateWindow":false,"ylabel":"Return Percentage"},"scale":"monthly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2015-01-30T00:00:00.000Z","2015-02-27T00:00:00.000Z","2015-03-31T00:00:00.000Z","2015-04-30T00:00:00.000Z","2015-05-29T00:00:00.000Z","2015-06-30T00:00:00.000Z","2015-07-31T00:00:00.000Z","2015-08-31T00:00:00.000Z","2015-09-30T00:00:00.000Z","2015-10-30T00:00:00.000Z","2015-11-30T00:00:00.000Z","2015-12-31T00:00:00.000Z","2016-01-29T00:00:00.000Z","2016-02-29T00:00:00.000Z","2016-03-31T00:00:00.000Z","2016-04-29T00:00:00.000Z","2016-05-31T00:00:00.000Z","2016-06-30T00:00:00.000Z","2016-07-29T00:00:00.000Z","2016-08-31T00:00:00.000Z","2016-09-30T00:00:00.000Z","2016-10-31T00:00:00.000Z","2016-11-30T00:00:00.000Z","2016-12-30T00:00:00.000Z","2017-01-31T00:00:00.000Z","2017-02-28T00:00:00.000Z","2017-03-31T00:00:00.000Z","2017-04-28T00:00:00.000Z","2017-05-31T00:00:00.000Z","2017-06-30T00:00:00.000Z","2017-07-31T00:00:00.000Z","2017-08-31T00:00:00.000Z","2017-09-29T00:00:00.000Z","2017-10-31T00:00:00.000Z","2017-11-30T00:00:00.000Z","2017-12-29T00:00:00.000Z","2018-01-31T00:00:00.000Z","2018-02-28T00:00:00.000Z","2018-03-29T00:00:00.000Z","2018-04-30T00:00:00.000Z","2018-05-31T00:00:00.000Z","2018-06-29T00:00:00.000Z","2018-07-31T00:00:00.000Z","2018-08-31T00:00:00.000Z","2018-09-28T00:00:00.000Z","2018-10-31T00:00:00.000Z","2018-11-30T00:00:00.000Z","2018-12-31T00:00:00.000Z","2019-01-31T00:00:00.000Z","2019-02-28T00:00:00.000Z","2019-03-29T00:00:00.000Z","2019-04-30T00:00:00.000Z","2019-05-31T00:00:00.000Z","2019-06-28T00:00:00.000Z","2019-07-31T00:00:00.000Z","2019-08-30T00:00:00.000Z","2019-09-30T00:00:00.000Z","2019-10-31T00:00:00.000Z","2019-11-29T00:00:00.000Z","2019-12-31T00:00:00.000Z","2020-01-31T00:00:00.000Z","2020-02-28T00:00:00.000Z","2020-03-31T00:00:00.000Z","2020-04-30T00:00:00.000Z","2020-05-29T00:00:00.000Z","2020-06-30T00:00:00.000Z","2020-07-31T00:00:00.000Z","2020-08-31T00:00:00.000Z","2020-09-30T00:00:00.000Z","2020-10-30T00:00:00.000Z","2020-11-30T00:00:00.000Z","2020-12-31T00:00:00.000Z","2021-01-29T00:00:00.000Z","2021-02-26T00:00:00.000Z","2021-03-31T00:00:00.000Z","2021-04-30T00:00:00.000Z","2021-05-28T00:00:00.000Z","2021-06-30T00:00:00.000Z","2021-07-30T00:00:00.000Z","2021-08-31T00:00:00.000Z","2021-09-30T00:00:00.000Z","2021-10-29T00:00:00.000Z","2021-11-18T00:00:00.000Z"],[-0.0284783913969293,0.0486981524627939,-0.038609642892243,0.0720799695772349,0.0661484303168667,0.0142137858274072,0.00475867636597638,-0.0795854282226486,-0.0128541227886669,-0.0585900016913495,0.0370573485609054,-0.0142532779822324,-0.149069621605327,-0.00763029967295137,0.114571903356864,0.0092992986077336,-0.00946340285096914,-0.0300120916415726,0.0811167393712589,-0.0619119256555212,-0.00987667391087332,-0.0318483392234332,-0.0228794426489799,0.0686088685107868,0.0815865697556286,0.0456223715377024,0.0641524886777041,0.0568576698412544,0.0499638289695439,0.0215788149346432,-0.0563881530705779,0.0804060591287232,-0.0286506908576214,0.0052099420530769,-0.0236667793661625,-0.000912720836612646,0.0643333278438656,-0.00421836599253766,-0.148321095733258,0.046127238960417,0.0175659620379902,0.0801794853481814,-0.037518321951487,0.0725279963646548,-0.0410474410320013,0.0709360572282101,-0.0338152544420316,-0.0730640504769883,-0.0313926386165618,0.0350577651148081,-0.0389245838616346,-0.0586559846828651,-0.133752318133067,0.116094548925601,0.0182003871675764,-0.0556709907215012,0.0530027519554157,0.151658109571794,0.0462800564156829,0.131620403722566,0.194339080215403,-0.0456721572718842,-0.157512022208718,0.272095971998668,0.0586685891166099,0.158578683438815,0.229290965776711,0.392735292898421,-0.130835518994637,-0.0852997640616745,0.283752023775746,0.17443123825232,0.0831803800003297,-0.141450575450213,-0.00212269228061357,0.0632665961082781,-0.103007044046921,0.0806858777678305,0.0277358872948106,0.0621798447765682,0.0163232855936624,0.276892540345125,0.00502525122565856]]},"evals":[],"jsHooks":[]}</script><p>For starting the calculation of Sharpe Ratio, I have split my portfolio as follows:
1. Apple - 25%
2. Pfizer - 25%
3. Tesla - 50%</p>
<p>This division is instinctive and does not come from any sort of calculation. You are free to experiment these based on how much risk you would like to add to your portfolio. Modification of these values will result in changes to the Sharpe Ratio.</p>
<div class="sourceCode" id="cb1482"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dollar_growth</span> <span class="op">&lt;-</span> <span class="fu">Return.portfolio</span><span class="op">(</span><span class="va">merged_returns</span>, weights <span class="op">=</span> <span class="va">percAlloc</span>, wealth.index <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/dygraphs/man/dygraph.html">dygraph</a></span><span class="op">(</span><span class="va">dollar_growth</span>, main <span class="op">=</span> <span class="st">"Growth of $1 Invested in Portfolio"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/dygraphs/man/dyAxis.html">dyAxis</a></span><span class="op">(</span><span class="st">"y"</span>, label <span class="op">=</span> <span class="st">"Dollor Return on 1$ investment"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-96c253c4884a02401a7f" style="width:672px;height:480px;" class="dygraphs html-widget"></div>
<script type="application/json" data-for="htmlwidget-96c253c4884a02401a7f">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60},"y":[]},"title":"Growth of $1 Invested in Portfolio","labels":["month","portfolio.wealthindex"],"legend":"auto","retainDateWindow":false,"ylabel":"Dollor Return on 1$ investment"},"scale":"monthly","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2015-01-30T00:00:00.000Z","2015-02-27T00:00:00.000Z","2015-03-31T00:00:00.000Z","2015-04-30T00:00:00.000Z","2015-05-29T00:00:00.000Z","2015-06-30T00:00:00.000Z","2015-07-31T00:00:00.000Z","2015-08-31T00:00:00.000Z","2015-09-30T00:00:00.000Z","2015-10-30T00:00:00.000Z","2015-11-30T00:00:00.000Z","2015-12-31T00:00:00.000Z","2016-01-29T00:00:00.000Z","2016-02-29T00:00:00.000Z","2016-03-31T00:00:00.000Z","2016-04-29T00:00:00.000Z","2016-05-31T00:00:00.000Z","2016-06-30T00:00:00.000Z","2016-07-29T00:00:00.000Z","2016-08-31T00:00:00.000Z","2016-09-30T00:00:00.000Z","2016-10-31T00:00:00.000Z","2016-11-30T00:00:00.000Z","2016-12-30T00:00:00.000Z","2017-01-31T00:00:00.000Z","2017-02-28T00:00:00.000Z","2017-03-31T00:00:00.000Z","2017-04-28T00:00:00.000Z","2017-05-31T00:00:00.000Z","2017-06-30T00:00:00.000Z","2017-07-31T00:00:00.000Z","2017-08-31T00:00:00.000Z","2017-09-29T00:00:00.000Z","2017-10-31T00:00:00.000Z","2017-11-30T00:00:00.000Z","2017-12-29T00:00:00.000Z","2018-01-31T00:00:00.000Z","2018-02-28T00:00:00.000Z","2018-03-29T00:00:00.000Z","2018-04-30T00:00:00.000Z","2018-05-31T00:00:00.000Z","2018-06-29T00:00:00.000Z","2018-07-31T00:00:00.000Z","2018-08-31T00:00:00.000Z","2018-09-28T00:00:00.000Z","2018-10-31T00:00:00.000Z","2018-11-30T00:00:00.000Z","2018-12-31T00:00:00.000Z","2019-01-31T00:00:00.000Z","2019-02-28T00:00:00.000Z","2019-03-29T00:00:00.000Z","2019-04-30T00:00:00.000Z","2019-05-31T00:00:00.000Z","2019-06-28T00:00:00.000Z","2019-07-31T00:00:00.000Z","2019-08-30T00:00:00.000Z","2019-09-30T00:00:00.000Z","2019-10-31T00:00:00.000Z","2019-11-29T00:00:00.000Z","2019-12-31T00:00:00.000Z","2020-01-31T00:00:00.000Z","2020-02-28T00:00:00.000Z","2020-03-31T00:00:00.000Z","2020-04-30T00:00:00.000Z","2020-05-29T00:00:00.000Z","2020-06-30T00:00:00.000Z","2020-07-31T00:00:00.000Z","2020-08-31T00:00:00.000Z","2020-09-30T00:00:00.000Z","2020-10-30T00:00:00.000Z","2020-11-30T00:00:00.000Z","2020-12-31T00:00:00.000Z","2021-01-29T00:00:00.000Z","2021-02-26T00:00:00.000Z","2021-03-31T00:00:00.000Z","2021-04-30T00:00:00.000Z","2021-05-28T00:00:00.000Z","2021-06-30T00:00:00.000Z","2021-07-30T00:00:00.000Z","2021-08-31T00:00:00.000Z","2021-09-30T00:00:00.000Z","2021-10-29T00:00:00.000Z","2021-11-18T00:00:00.000Z"],[0.971521608603071,1.01883291601972,0.979496140965338,1.05009819300714,1.11956054015314,1.13547373389169,1.14087708591335,1.05007989448153,1.03658203857995,0.97584869518633,1.01201106042655,0.997586585461201,0.848876730647949,0.84239954680771,0.938914866272429,0.947646115981136,0.938678159025451,0.910506464094836,0.984363779638663,0.923419922495687,0.914299605038393,0.885180681065279,0.864928240438861,0.924269988358397,0.999678006236634,1.04528568765523,1.1123433658975,1.17558861774581,1.2343255263814,1.26096080848429,1.18985755739948,1.2855293145145,1.24869801153594,1.25520365581783,1.22549702783599,1.22437849116348,1.30314683404048,1.29764968375248,1.10518086078039,1.15615980244009,1.1764688616396,1.27079752949403,1.22311933864732,1.31182973359427,1.25798247996053,1.3472187971511,1.30166225073634,1.20655753434455,1.16868050969879,1.20965183650206,1.16256664214875,1.09437515099407,0.947999937641386,1.05805756278336,1.0773146200716,1.01733944785346,1.07126123826249,1.23372669251492,1.29082363344605,1.46072236121484,1.74459780134341,1.66491825618427,1.40267361484047,1.78433545546738,1.88901989915039,2.18857818774738,2.69039939409382,3.747014188147,3.25677164216052,2.97896978948147,3.82425849601365,4.49132864087027,4.86491906392422,4.17677346281342,4.16790745802604,4.43159677578965,3.97511109150769,4.29584641915063,4.41499553126801,4.6895192680915,4.76606763040154,6.08575620404009,6.1163386578635]]},"evals":[],"jsHooks":[]}</script><p>Now, for the purpose of this analysis, imagine I invested one dollar in this portfolio based on the allocations I have mentioned above. The dygraph above shows what would be the return on investment of 1 dollar on this portfolio. We can observe the superior rise post 2020 that goes upto a 6-fold increase on the overall returns.</p>
</div>
<div id="portfolio-sharpe-ratio" class="section level3">
<h3>
<span class="header-section-number">104.5.3</span> Portfolio Sharpe Ratio<a class="anchor" aria-label="anchor" href="#portfolio-sharpe-ratio"><i class="fas fa-link"></i></a>
</h3>
<p>Finally, let’s calculate the Sharpe Ratio of this Portfolio</p>
<div class="sourceCode" id="cb1483"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sharpe_ratio</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu">SharpeRatio</span><span class="op">(</span><span class="va">portfolio_returns</span>, Rf <span class="op">=</span> <span class="fl">.0003</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>
<span class="va">sharpe_ratio</span></code></pre></div>
<pre><code>##                               portfolio.returns
## StdDev Sharpe (Rf=0%, p=95%):            0.2624
## VaR Sharpe (Rf=0%, p=95%):               0.2505
## ES Sharpe (Rf=0%, p=95%):                0.1962</code></pre>
</div>
<div id="improving-the-sharpe-ratio" class="section level3">
<h3>
<span class="header-section-number">104.5.4</span> Improving the Sharpe Ratio<a class="anchor" aria-label="anchor" href="#improving-the-sharpe-ratio"><i class="fas fa-link"></i></a>
</h3>
<p>Could this score have been better?</p>
<p>We see a 0.26 score on the Sharpe Ratio’s variance which is considered very good. But, the ideal portfolio allocation would have this score maximized. To maximize this score there are multiple ways. Either we can export all this data to Excel and run a What-If analysis to find what percentage allocation would maximize the sharpe ratio. Or in this code, we could manually change the percentage allocation in the ‘percAlloc’ variable created above. The higher the score, the better the portfolio.</p>
</div>
</div>
<div id="conclusion-summary-and-learnings" class="section level2">
<h2>
<span class="header-section-number">104.6</span> Conclusion, Summary and Learnings<a class="anchor" aria-label="anchor" href="#conclusion-summary-and-learnings"><i class="fas fa-link"></i></a>
</h2>
<p>Data Visualization can co-exist between being easy and complicated. But, it is a very important tool for any data analytics project life cycle. This project was aimed at creating a stock price predictor on R, by simply studying stock price data and building predictions on ARIMA. Another important take away from this project is the importance of data visualization in the art of storytelling. Crunching numbers and bringing out predictions does not deliver the message that these visualizations do.</p>
<p>I hope this way helpful.
P.S. Please do not consider this investment advice!</p>
</div>
<div id="references-8" class="section level2">
<h2>
<span class="header-section-number">104.7</span> References<a class="anchor" aria-label="anchor" href="#references-8"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li><a href="https://www.analyticsvidhya.com/blog/2020/11/stock-market-price-trend-prediction-using-time-series-forecasting/" class="uri">https://www.analyticsvidhya.com/blog/2020/11/stock-market-price-trend-prediction-using-time-series-forecasting/</a></li>
<li><a href="https://www.kdnuggets.com/2020/01/stock-market-forecasting-time-series-analysis.html" class="uri">https://www.kdnuggets.com/2020/01/stock-market-forecasting-time-series-analysis.html</a></li>
<li><a href="https://towardsdatascience.com/time-series-forecasting-predicting-stock-prices-using-an-arima-model-2e3b3080bd70" class="uri">https://towardsdatascience.com/time-series-forecasting-predicting-stock-prices-using-an-arima-model-2e3b3080bd70</a></li>
<li><a href="https://rpubs.com/kapage/523169" class="uri">https://rpubs.com/kapage/523169</a></li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="ggplot2-in-python.html"><span class="header-section-number">103</span> ggplot2 in python</a></div>
<div class="next"><a href="color-selection-for-ggplot-graphs.html"><span class="header-section-number">105</span> Color selection for ggplot graphs</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#predictive-analytics-using-data-visualization-in-r"><span class="header-section-number">104</span> Predictive Analytics using Data Visualization in R</a></li>
<li>
<a class="nav-link" href="#building-a-trading-strategy-and-an-optimal-fund-allocation-mechanism-powered-by-dataviz"><span class="header-section-number">104.1</span> Building a Trading Strategy and an optimal Fund Allocation Mechanism, powered by DataViz!</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#lets-get-started-on-building-our-own-day-trading-guide."><span class="header-section-number">104.1.1</span> Let’s get started on building our own day-trading guide.</a></li>
<li><a class="nav-link" href="#plots-to-study-the-trends-in-the-market-exploratory-data-analysis"><span class="header-section-number">104.1.2</span> Plots to study the trends in the market (Exploratory Data Analysis)</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#implementation-of-prdictive-analytics-in-stock-prices"><span class="header-section-number">104.2</span> Implementation of Prdictive Analytics in Stock Prices</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#what-is-predictive-analytics-and-how-does-it-come-up-in-trading-strategies"><span class="header-section-number">104.2.1</span> What is Predictive Analytics and how does it come up in Trading Strategies?</a></li></ul>
</li>
<li><a class="nav-link" href="#arima---autoregresive-integrating-moving-average"><span class="header-section-number">104.3</span> ARIMA - Autoregresive Integrating Moving Average</a></li>
<li><a class="nav-link" href="#comparing-predictions-with-actual-stock-prices"><span class="header-section-number">104.4</span> Comparing predictions with Actual Stock Prices</a></li>
<li>
<a class="nav-link" href="#building-a-portfolio-of-stocks"><span class="header-section-number">104.5</span> Building a Portfolio of Stocks</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#how-to-decide-what-percentage-of-your-portfolio-should-be-invested-where"><span class="header-section-number">104.5.1</span> How to decide what percentage of your portfolio should be invested where?</a></li>
<li><a class="nav-link" href="#sharpe-ratio"><span class="header-section-number">104.5.2</span> Sharpe Ratio</a></li>
<li><a class="nav-link" href="#portfolio-sharpe-ratio"><span class="header-section-number">104.5.3</span> Portfolio Sharpe Ratio</a></li>
<li><a class="nav-link" href="#improving-the-sharpe-ratio"><span class="header-section-number">104.5.4</span> Improving the Sharpe Ratio</a></li>
</ul>
</li>
<li><a class="nav-link" href="#conclusion-summary-and-learnings"><span class="header-section-number">104.6</span> Conclusion, Summary and Learnings</a></li>
<li><a class="nav-link" href="#references-8"><span class="header-section-number">104.7</span> References</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc21fall2/blob/main/predictive-analytics-r.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc21fall2/edit/main/predictive-analytics-r.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>EDAV Fall 2021 Tues/Thurs Community Contributions</strong>" was written by . It was last built on 2021-11-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
