<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 63 Recursive codes and self-organized map with R | EDAV Fall 2021 Tues/Thurs Community Contributions</title>
<meta name="description" content="Yuki Ikeda library(tidyverse) library(kohonen) library(openintro) library(datasets) In this article, I introduce (A) how to develop recursive codes with R in order to use R for every phase of our...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 63 Recursive codes and self-organized map with R | EDAV Fall 2021 Tues/Thurs Community Contributions">
<meta property="og:type" content="book">
<meta property="og:description" content="Yuki Ikeda library(tidyverse) library(kohonen) library(openintro) library(datasets) In this article, I introduce (A) how to develop recursive codes with R in order to use R for every phase of our...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 63 Recursive codes and self-organized map with R | EDAV Fall 2021 Tues/Thurs Community Contributions">
<meta name="twitter:description" content="Yuki Ikeda library(tidyverse) library(kohonen) library(openintro) library(datasets) In this article, I introduce (A) how to develop recursive codes with R in order to use R for every phase of our...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><script src="libs/d3-4.5.0/d3.min.js"></script><script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script><script src="libs/sankey-1/sankey.js"></script><script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script><link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="libs/vis-9.1.0/vis-network.min.js"></script><script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script><link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script><script src="libs/dygraphs-1.1.1/shapes.js"></script><script src="libs/moment-2.8.4/moment.js"></script><script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script><script src="libs/proj4js-2.3.15/proj4.js"></script><link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet">
<script src="libs/highcharts-8.1.2/highcharts.js"></script><script src="libs/highcharts-8.1.2/highcharts-3d.js"></script><script src="libs/highcharts-8.1.2/highcharts-more.js"></script><script src="libs/highcharts-8.1.2/modules/stock.js"></script><script src="libs/highcharts-8.1.2/modules/map.js"></script><script src="libs/highcharts-8.1.2/modules/annotations.js"></script><script src="libs/highcharts-8.1.2/modules/data.js"></script><script src="libs/highcharts-8.1.2/modules/drilldown.js"></script><script src="libs/highcharts-8.1.2/modules/item-series.js"></script><script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script><script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script><script src="libs/highcharts-8.1.2/modules/exporting.js"></script><script src="libs/highcharts-8.1.2/modules/export-data.js"></script><script src="libs/highcharts-8.1.2/modules/funnel.js"></script><script src="libs/highcharts-8.1.2/modules/heatmap.js"></script><script src="libs/highcharts-8.1.2/modules/treemap.js"></script><script src="libs/highcharts-8.1.2/modules/sankey.js"></script><script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script><script src="libs/highcharts-8.1.2/modules/organization.js"></script><script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script><script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script><script src="libs/highcharts-8.1.2/modules/sunburst.js"></script><script src="libs/highcharts-8.1.2/modules/vector.js"></script><script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script><script src="libs/highcharts-8.1.2/modules/xrange.js"></script><script src="libs/highcharts-8.1.2/modules/tilemap.js"></script><script src="libs/highcharts-8.1.2/modules/venn.js"></script><script src="libs/highcharts-8.1.2/modules/gantt.js"></script><script src="libs/highcharts-8.1.2/modules/timeline.js"></script><script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script><script src="libs/highcharts-8.1.2/modules/bullet.js"></script><script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script><script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script><script src="libs/highcharts-8.1.2/modules/lollipop.js"></script><script src="libs/highcharts-8.1.2/modules/series-label.js"></script><script src="libs/highcharts-8.1.2/plugins/motion.js"></script><script src="libs/highcharts-8.1.2/custom/reset.js"></script><script src="libs/highcharts-8.1.2/modules/boost.js"></script><script src="libs/highchart-binding-0.8.2/highchart.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">EDAV Fall 2021 Tues/Thurs Community Contributions</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome!</a></li>
<li><a class="" href="community-contribution.html"><span class="header-section-number">2</span> Community Contribution</a></li>
<li><a class="" href="github-submission-instructions.html"><span class="header-section-number">3</span> GitHub submission instructions</a></li>
<li><a class="" href="sample-project.html"><span class="header-section-number">4</span> Sample project</a></li>
<li class="book-part">Cheatsheets</li>
<li><a class="" href="statistics-in-r-vs-python.html"><span class="header-section-number">5</span> Statistics in R vs Python</a></li>
<li><a class="" href="data-visualization-with-seaborn.html"><span class="header-section-number">6</span> Data Visualization with Seaborn</a></li>
<li><a class="" href="how-to-make-your-own-r-package.html"><span class="header-section-number">7</span> How to Make Your Own R package</a></li>
<li><a class="" href="rchess-package-cheatsheet.html"><span class="header-section-number">8</span> RChess package cheatsheet</a></li>
<li><a class="" href="hypothesis-testing-cheatsheet.html"><span class="header-section-number">9</span> Hypothesis testing cheatsheet</a></li>
<li><a class="" href="interactive-web-visualizations-for-r-cheatsheet.html"><span class="header-section-number">10</span> Interactive web visualizations for R cheatsheet"</a></li>
<li><a class="" href="ggforce.html"><span class="header-section-number">11</span> ggforce</a></li>
<li><a class="" href="gganimate-cheatsheet.html"><span class="header-section-number">12</span> GGanimate cheatsheet</a></li>
<li><a class="" href="statistical-tests-and-parameter-estimations-in-r-cheatsheet.html"><span class="header-section-number">13</span> Statistical Tests and Parameter Estimations in R Cheatsheet</a></li>
<li><a class="" href="ggalluvial-cheat-sheet.html"><span class="header-section-number">14</span> ggalluvial-cheat-sheet</a></li>
<li><a class="" href="introduction-to-plotly.html"><span class="header-section-number">15</span> Introduction to plotly</a></li>
<li><a class="" href="draw-graphs-using-python-and-r.html"><span class="header-section-number">16</span> draw graphs using python and R</a></li>
<li><a class="" href="data-visualization-packages-in-r.html"><span class="header-section-number">17</span> Data Visualization Packages in R</a></li>
<li><a class="" href="esquisse-cheat-sheet.html"><span class="header-section-number">18</span> Esquisse Cheat sheet</a></li>
<li><a class="" href="review-sheet-for-r-code-and-data-transformation.html"><span class="header-section-number">19</span> review sheet for r code and data transformation</a></li>
<li><a class="" href="scrape-twitter-data-using-r.html"><span class="header-section-number">20</span> Scrape Twitter data using R</a></li>
<li><a class="" href="r-note-and-mathematics-in-rmd-cheatsheet.html"><span class="header-section-number">21</span> R note and Mathematics in Rmd cheatsheet</a></li>
<li><a class="" href="textbook-notes.html"><span class="header-section-number">22</span> Textbook Notes</a></li>
<li><a class="" href="ggplot2-cheatsheet.html"><span class="header-section-number">23</span> ggplot2 cheatsheet</a></li>
<li><a class="" href="rstudio-cheatsheet.html"><span class="header-section-number">24</span> RStudio Cheatsheet</a></li>
<li><a class="" href="d3-visualization-in-r-cheatsheet.html"><span class="header-section-number">25</span> D3 Visualization in R Cheatsheet</a></li>
<li class="book-part">Tutorials</li>
<li><a class="" href="tutorial-on-cluster-analysis.html"><span class="header-section-number">26</span> Tutorial on Cluster Analysis</a></li>
<li><a class="" href="how-to-integrate-r-with-postgresql.html"><span class="header-section-number">27</span> How to Integrate R with PostgreSQL</a></li>
<li><a class="" href="apply-function-in-r.html"><span class="header-section-number">28</span> Apply function in r</a></li>
<li><a class="" href="introduction-to-interactive-graphs-in-r.html"><span class="header-section-number">29</span> Introduction to interactive graphs in R</a></li>
<li><a class="" href="plot-and-analyze-stock-data-with-r.html"><span class="header-section-number">30</span> Plot and Analyze Stock Data with R</a></li>
<li><a class="" href="data-visulization-ordering.html"><span class="header-section-number">31</span> Data Visulization Ordering</a></li>
<li><a class="" href="tutorial-on-lattice-package-in-r.html"><span class="header-section-number">32</span> Tutorial on lattice package in R</a></li>
<li><a class="" href="network-visualization-in-r.html"><span class="header-section-number">33</span> Network Visualization in R</a></li>
<li><a class="" href="dplyr-tutorial-in-r.html"><span class="header-section-number">34</span> Dplyr tutorial in R</a></li>
<li><a class="" href="downloading-files.html"><span class="header-section-number">35</span> Downloading files</a></li>
<li><a class="" href="video-introduction-to-maps-with-ggmap.html"><span class="header-section-number">36</span> Video introduction to maps with ggmap</a></li>
<li><a class="" href="comparison-among-base-r-tidyverse-and-datatable.html"><span class="header-section-number">37</span> Comparison among base R, tidyverse, and datatable</a></li>
<li><a class="" href="raincloud-plot-101-density-plot-or-boxplotwhy-not-do-both.html"><span class="header-section-number">38</span> Raincloud plot 101: density plot or boxplot？Why not do both!</a></li>
<li><a class="" href="an-introduction-to-dygraph-in-r.html"><span class="header-section-number">39</span> An Introduction to Dygraph in R</a></li>
<li><a class="" href="streamlit-tutorial.html"><span class="header-section-number">40</span> Streamlit Tutorial</a></li>
<li><a class="" href="hive-plots-with-the-ggraph-and-hiver-packages.html"><span class="header-section-number">41</span> Hive plots with the ggraph and hiver packages</a></li>
<li><a class="" href="introduction-to-xai-explainable-ai-in-r.html"><span class="header-section-number">42</span> Introduction to XAI (Explainable AI) in R</a></li>
<li><a class="" href="tutorial-for-gg_cleveland.html"><span class="header-section-number">43</span> Tutorial for gg_cleveland</a></li>
<li><a class="" href="neural-network-tools-in-r.html"><span class="header-section-number">44</span> Neural network tools in R</a></li>
<li><a class="" href="r-dplyr-vs-python-pandas.html"><span class="header-section-number">45</span> R Dplyr vs Python Pandas</a></li>
<li><a class="" href="readable-plots.html"><span class="header-section-number">46</span> Readable Plots</a></li>
<li><a class="" href="introduction-to-exploratory-spatial-data-analysis-and-visualization-using-qgis.html"><span class="header-section-number">47</span> Introduction to exploratory spatial data analysis and visualization using QGIS</a></li>
<li><a class="" href="data-visualization-in-python-vs-r.html"><span class="header-section-number">48</span> Data Visualization in Python vs R</a></li>
<li><a class="" href="base-r-tutorial.html"><span class="header-section-number">49</span> Base R Tutorial</a></li>
<li><a class="" href="python-altair-visualization-method-tutorial.html"><span class="header-section-number">50</span> Python Altair Visualization Method Tutorial</a></li>
<li><a class="" href="r-to-python-easy-plot.html"><span class="header-section-number">51</span> R to python easy plot</a></li>
<li><a class="" href="introduction-to-models-and-prediction-evaluation.html"><span class="header-section-number">52</span> Introduction to models and prediction evaluation</a></li>
<li><a class="" href="introduction-to-interactive-time-series-visualizations-with-dygraphs-in-r.html"><span class="header-section-number">53</span> Introduction to Interactive Time Series Visualizations with dygraphs in R</a></li>
<li><a class="" href="integrate-r-with-python.html"><span class="header-section-number">54</span> Integrate R with Python</a></li>
<li><a class="" href="python-visualization-tutorial.html"><span class="header-section-number">55</span> Python Visualization Tutorial</a></li>
<li><a class="" href="gganimate-tutorial.html"><span class="header-section-number">56</span> Gganimate Tutorial</a></li>
<li><a class="" href="get-nba-dataset-in-r.html"><span class="header-section-number">57</span> Get NBA dataset in R</a></li>
<li><a class="" href="mtemplates.html"><span class="header-section-number">58</span> Mtemplates</a></li>
<li><a class="" href="introduction-to-time-series-analysis-in-r.html"><span class="header-section-number">59</span> Introduction to Time Series Analysis in R</a></li>
<li><a class="" href="storytelling-with-data.html"><span class="header-section-number">60</span> Storytelling with Data</a></li>
<li><a class="" href="tutorial-on-r-torch-package.html"><span class="header-section-number">61</span> Tutorial on R torch package</a></li>
<li><a class="" href="edav-tutorials-correlogram-calendar-heatmap-and-slopegram.html"><span class="header-section-number">62</span> EDAV Tutorials: Correlogram, Calendar Heatmap and Slopegram</a></li>
<li><a class="active" href="recursive-codes-and-self-organized-map-with-r.html"><span class="header-section-number">63</span> Recursive codes and self-organized map with R</a></li>
<li class="book-part">Project &amp; Workshops</li>
<li><a class="" href="introduction-to-analytics-consulting-at-accenture.html"><span class="header-section-number">64</span> Introduction to analytics consulting at Accenture</a></li>
<li><a class="" href="map-of-the-r-world.html"><span class="header-section-number">65</span> Map of the R world</a></li>
<li><a class="" href="alluvial-diagrams-and-their-implementation-using-ggalluvial-in-r.html"><span class="header-section-number">66</span> Alluvial diagrams and their implementation using GGalluvial in R</a></li>
<li class="book-part">Data Visualization</li>
<li><a class="" href="an-introduction-to-pyecharts-package-in-python.html"><span class="header-section-number">67</span> An introduction to pyecharts package in Python</a></li>
<li><a class="" href="visualization-in-r-v.s.-python.html"><span class="header-section-number">68</span> Visualization in R v.s. Python</a></li>
<li><a class="" href="understand-data-with-plots.html"><span class="header-section-number">69</span> Understand data with plots</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="github-initial-setup.html"><span class="header-section-number">70</span> Github initial setup</a></li>
<li><a class="" href="tutorial-for-pull-request-mergers.html"><span class="header-section-number">71</span> Tutorial for pull request mergers</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jtr13/cc21fall2">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="recursive-codes-and-self-organized-map-with-r" class="section level1">
<h1>
<span class="header-section-number">63</span> Recursive codes and self-organized map with R<a class="anchor" aria-label="anchor" href="#recursive-codes-and-self-organized-map-with-r"><i class="fas fa-link"></i></a>
</h1>
<p>Yuki Ikeda</p>
<div class="sourceCode" id="cb757"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">kohonen</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://openintrostat.github.io/openintro/">openintro</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span></code></pre></div>
<p>In this article, I introduce (A) how to develop recursive codes with R in order to use R for every phase of our data analyses, (B) how to draw a self-organized map with R, a not well known but interesting way of 2D projection (dimension reduction) of (relatively) high dimensional data, and (C) the three most useful functions in ggplot in practice.</p>
<div id="to-conduct-all-analyses-with-r-write-recursive-code-with-r" class="section level2">
<h2>
<span class="header-section-number">63.1</span> To conduct all analyses with R – Write recursive code with R<a class="anchor" aria-label="anchor" href="#to-conduct-all-analyses-with-r-write-recursive-code-with-r"><i class="fas fa-link"></i></a>
</h2>
<div id="motivation-4" class="section level3">
<h3>
<span class="header-section-number">63.1.1</span> Motivation<a class="anchor" aria-label="anchor" href="#motivation-4"><i class="fas fa-link"></i></a>
</h3>
<p>In practice, I believe that one of the annoying workflows is to go around and among many pieces of software such as using python for data cleaning, developing statistical analysis using R, visualizing them in Excel, etc. It typically makes the folder messy and bothers a successor once current stuff leaves the role. Hence, if we employ datavis tools in R, we also want to develop other analyses with R. However, in order for us to do so, we have to learn many types of analyses with R. In fact, R is an advanced language and can do many things by their own. Here, I introduce recursive coding in R as an illustration.</p>
<p>We sometimes use recursive functions (we will give one frequent example later). People may think that R is not as good as python to handle a recursive function, so they might conduct recursive programming using python and, after finishing it, move to R for visualization, etc, which makes the workflow messy.</p>
</div>
<div id="an-illustration-of-recursive-code-levenshtein-distance" class="section level3">
<h3>
<span class="header-section-number">63.1.2</span> An illustration of recursive code: Levenshtein distance<a class="anchor" aria-label="anchor" href="#an-illustration-of-recursive-code-levenshtein-distance"><i class="fas fa-link"></i></a>
</h3>
<p>Here, I introduce how to define a recursive function in R by using an example of the Levenshtein distance.
In practice, there is often the case that we want to connect A and B that are supposed to be the same. For example, at a commercial bank, we often have to connect our corporate debtor data and external information of these companies using the company name as the only available key.
However, it is also often the case that one data have a company name as “XXX, plc” and the other one has as just “xxx,” or one has as “XXX, plc, YYY brunch” and the other as “XXX, plc.”
In such cases, we cannot directly connect the two data. This is where the Levenshtein distance comes in.
The Levenshtein distance between any two words is the minimum number of edits (1) insert one character to either one word, (2) delete one character in either one word, or (3) substitute one character in either one word to transform one word into another.
In my past job, we used this distance to quantify the difference of words in two company name columns, which enabled us to find the more possible matches between them.</p>
<p>The Levenshtein distance is useful for the reason above, however, computing the distance requires us to define recursive functions for this. Please see [1] or the definition written in <a href="https://en.wikipedia.org/wiki/Levenshtein_distance" class="uri">https://en.wikipedia.org/wiki/Levenshtein_distance</a>. Hence, we have to define a recursive function in R.</p>
</div>
<div id="naive-coding" class="section level3">
<h3>
<span class="header-section-number">63.1.3</span> Naive coding<a class="anchor" aria-label="anchor" href="#naive-coding"><i class="fas fa-link"></i></a>
</h3>
<p>One naive way to do so is just using “recall” function which orders to compute recursively:</p>
<div class="sourceCode" id="cb758"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">LD_naive</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">==</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">y</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span> <span class="op">(</span>
      <span class="fu"><a href="https://rdrr.io/r/base/Recall.html">Recall</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">y</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span>
      <span class="fl">1</span><span class="op">+</span>
      <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span>
        <span class="fu"><a href="https://rdrr.io/r/base/Recall.html">Recall</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,<span class="va">y</span><span class="op">)</span>,
        <span class="fu"><a href="https://rdrr.io/r/base/Recall.html">Recall</a></span><span class="op">(</span><span class="va">x</span>,<span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">y</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>,
        <span class="fu"><a href="https://rdrr.io/r/base/Recall.html">Recall</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">y</span>,<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
      <span class="op">)</span>
    <span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="co">## Levenshtein distance between "kitten" and "sitting"</span>

<span class="fu">LD_naive</span><span class="op">(</span><span class="st">"kitten"</span>,<span class="st">"sitting"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>However, this takes much time when the length between strings gets longer since it computes the value of the distance between the same partial strings of x and y again and again.</p>
</div>
<div id="better-coding-using-dp-table" class="section level3">
<h3>
<span class="header-section-number">63.1.4</span> Better coding using DP table<a class="anchor" aria-label="anchor" href="#better-coding-using-dp-table"><i class="fas fa-link"></i></a>
</h3>
<p>Therefore, a better coding would be to prepare the Dynamic Programming table to preserve the distance of all partial strings beginning at the first and ending at some point in x and y:</p>
<div class="sourceCode" id="cb760"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">LD0</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
  
  <span class="va">M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="va">n</span><span class="op">+</span><span class="fl">1</span>,<span class="va">m</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span>
  
  <span class="va">M</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="va">m</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span>
  <span class="va">M</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="va">n</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span>

  <span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">n</span><span class="op">)</span><span class="op">{</span>
    <span class="kw">for</span><span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="va">m</span><span class="op">)</span><span class="op">{</span>
     
      <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">i</span>,<span class="va">i</span><span class="op">)</span><span class="op">==</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">y</span>,<span class="va">j</span>,<span class="va">j</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
        <span class="va">M</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span>,<span class="va">j</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">M</span><span class="op">[</span><span class="va">i</span>,<span class="va">j</span><span class="op">]</span>
      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
        <span class="va">M</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span>,<span class="va">j</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">M</span><span class="op">[</span><span class="va">i</span>,<span class="va">j</span><span class="op">]</span>,<span class="va">M</span><span class="op">[</span><span class="va">i</span><span class="op">+</span><span class="fl">1</span>,<span class="va">j</span><span class="op">]</span>,<span class="va">M</span><span class="op">[</span><span class="va">i</span>,<span class="va">j</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
      <span class="op">}</span>
      
    <span class="op">}</span>
  <span class="op">}</span>
  
  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">M</span><span class="op">[</span><span class="va">n</span><span class="op">+</span><span class="fl">1</span>,<span class="va">m</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>
  
<span class="op">}</span>

<span class="co">## Levenshtein distance between "kitten" and "sitting"</span>

<span class="fu">LD0</span><span class="op">(</span><span class="st">"kitten"</span>,<span class="st">"sitting"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>However, even if x and y are identical, this code computes the distance of every pair of partial strings beginning at the first and ending at some point in x and y. Clearly in such a case, we only need to compute <span class="math inline">\(LD(x[1:i],y[1:i])\)</span> for each <span class="math inline">\(i\)</span>. So, this code is a little redundant.</p>
</div>
<div id="recursive-coding-using-global-variable" class="section level3">
<h3>
<span class="header-section-number">63.1.5</span> Recursive coding using global variable<a class="anchor" aria-label="anchor" href="#recursive-coding-using-global-variable"><i class="fas fa-link"></i></a>
</h3>
<p>The next code is more efficient in the sense that it only computes distances they need.</p>
<div class="sourceCode" id="cb762"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">LD</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
  <span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
  
  <span class="va">M</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="va">n</span><span class="op">+</span><span class="fl">1</span>,<span class="va">m</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span>   <span class="co">##Global variable</span>

  <span class="va">LDn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">n</span>,<span class="va">m</span><span class="op">)</span> <span class="op">{</span>
  
    <span class="kw">if</span> <span class="op">(</span><span class="va">n</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span>         
      <span class="va">M</span><span class="op">[</span><span class="fl">1</span>,<span class="va">m</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">m</span>   <span class="co">##use &lt;&lt;- when input into global variable</span>
      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span> <span class="va">m</span> <span class="op">)</span>
    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">m</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span>
      <span class="va">M</span><span class="op">[</span><span class="va">n</span><span class="op">+</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">n</span>
      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span> <span class="va">n</span> <span class="op">)</span>
    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">n</span>,<span class="va">n</span><span class="op">)</span><span class="op">==</span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">y</span>,<span class="va">m</span>,<span class="va">m</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    
      <span class="co">## first get values from global variable</span>
      <span class="va">itm1</span> <span class="op">&lt;-</span> <span class="va">M</span><span class="op">[</span><span class="va">n</span>,<span class="va">m</span><span class="op">]</span>
    
      <span class="co">## if global variable does not have the value,</span>
      <span class="co">## then get instead from the function which we very define,</span>
      <span class="co">## passing the value to global variable</span>
      <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">itm1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
        <span class="va">itm1</span> <span class="op">&lt;-</span> <span class="fu">LDn</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">n</span><span class="op">-</span><span class="fl">1</span>,<span class="va">m</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>
        <span class="va">M</span><span class="op">[</span><span class="va">n</span>,<span class="va">m</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">itm1</span>   <span class="co">##use &lt;&lt;- when input into global variable</span>
      <span class="op">}</span>
    
      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span> <span class="op">(</span> <span class="va">itm1</span> <span class="op">)</span>
    
    <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    
      <span class="va">itm2</span> <span class="op">&lt;-</span> <span class="va">M</span><span class="op">[</span><span class="va">n</span>,<span class="va">m</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span>
      <span class="va">itm3</span> <span class="op">&lt;-</span> <span class="va">M</span><span class="op">[</span><span class="va">n</span><span class="op">+</span><span class="fl">1</span>,<span class="va">m</span><span class="op">]</span>
      <span class="va">itm4</span> <span class="op">&lt;-</span> <span class="va">M</span><span class="op">[</span><span class="va">n</span>,<span class="va">m</span><span class="op">]</span>
    
    
      <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">itm2</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
        <span class="va">itm2</span> <span class="op">&lt;-</span> <span class="fu">LDn</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">n</span><span class="op">-</span><span class="fl">1</span>,<span class="va">m</span><span class="op">)</span>
        <span class="va">M</span><span class="op">[</span><span class="va">n</span>,<span class="va">m</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">itm2</span>   <span class="co">##use &lt;&lt;- when input into global variable</span>
      <span class="op">}</span>

    
      <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">itm3</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
        <span class="va">itm3</span> <span class="op">&lt;-</span> <span class="fu">LDn</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">n</span>,<span class="va">m</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>
        <span class="va">M</span><span class="op">[</span><span class="va">n</span><span class="op">+</span><span class="fl">1</span>,<span class="va">m</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">itm3</span>   <span class="co">##use &lt;&lt;- when input into global variable</span>
      <span class="op">}</span>

    
      <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">itm4</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
        <span class="va">itm4</span> <span class="op">&lt;-</span> <span class="fu">LDn</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">n</span><span class="op">-</span><span class="fl">1</span>,<span class="va">m</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>
        <span class="va">M</span><span class="op">[</span><span class="va">n</span>,<span class="va">m</span><span class="op">]</span> <span class="op">&lt;&lt;-</span> <span class="va">itm4</span>   <span class="co">##use &lt;&lt;- when input into global variable</span>
      <span class="op">}</span>
        
      <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span> <span class="fl">1</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span> <span class="va">itm2</span>, <span class="va">itm3</span>, <span class="va">itm4</span> <span class="op">)</span> <span class="op">)</span>
    <span class="op">}</span>
  
  <span class="op">}</span>

  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span> <span class="fu">LDn</span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span>,<span class="va">n</span>,<span class="va">m</span><span class="op">)</span> <span class="op">)</span>

<span class="op">}</span>

<span class="co">## Levenshtein distance between "kitten" and "sitting"</span>

<span class="fu">LD</span><span class="op">(</span><span class="st">"kitten"</span>,<span class="st">"sitting"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Specifically, when the two strings are identical, it only computes the <span class="math inline">\(LD(x[1:i],y[1:i])\)</span> for each <span class="math inline">\(i\)</span>.</p>
<p>As seen from this example, the key point is to prepare the global variable <span class="math inline">\(M\)</span> to preserve the distance between partial strings, and call it when computing the distance between longer strings by at most one character. Note that we need to use &lt;&lt;- when we input a value in a global variable.</p>
<p>This way of coding can be applied to any other recursive programming with R.</p>
</div>
</div>
<div id="self-organized-map-with-r" class="section level2">
<h2>
<span class="header-section-number">63.2</span> Self-organized map with R<a class="anchor" aria-label="anchor" href="#self-organized-map-with-r"><i class="fas fa-link"></i></a>
</h2>
<p>In this chapter, we introduce a self-organized map and how to draw it using R package <code>kohonen</code>, discussing both its merits and the possible limits.</p>
<p>When we conduct a multivariate exploratory analysis, we first want to briefly look into what typical patterns the data have.
However, we can only easily visually interpret at most 2-dimensional scatter patterns.
Hence, it is useful to somehow project the data points to a 2-dimensional plane.</p>
<p>A popular way to do so is using a principal component analysis (PCR), however, even for relatively moderate dimension like three or four, non-specialist might feel PCA biplots with three or four principal component vectors are not easy to see.</p>
<p>This is where the self-organized map comes in. It employs a simple neural net with only one input layer (data points) and one output layer. Once we specify the 2D(Dimensional)-shape of the output layer, it searches the optimal projection to (fairly informally) minimize the distance from each point to its nearest unit in the 2D-output layer by iterating the minimization with respect current unit in the output layer and then updating those units based on data points that belong to each unit. In that sense, it is similar to the k-means method. The difference is that since the k mean vectors are not located in a 2D-plane, we still cannot visualize the result of a k-means classification directly, while in a self-organized map, since the units (corresponding k mean vectors) are squeezed in 2D plane, we can visualize them.</p>
<div id="iris-data" class="section level3">
<h3>
<span class="header-section-number">63.2.1</span> Iris data<a class="anchor" aria-label="anchor" href="#iris-data"><i class="fas fa-link"></i></a>
</h3>
<p>The code below is the elementary tutorial to draw a self-organized map with R using the well-known iris data. We can see that (1) there is a group with large sepal width but small all other three lengths (setosa), (2) there is a group with small to medium all four lengths (versicolor) and (3) there is a group with large all four lengths (virginica).</p>
<div class="sourceCode" id="cb764"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">5702</span><span class="op">)</span>
  
  <span class="co">##"som" function needs to have matrix data (not data.frame) as data.</span>
  <span class="va">iris.mx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span>
  
  <span class="co">## We first have to specify the shape of the output layer</span>
  <span class="co">## "topo" specifies the shape of 2D-output layer</span>
  <span class="co">## "xdim" and "ydim" specifies the dimension of the output layer</span>
  <span class="va">g1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/unit.distances.html">somgrid</a></span><span class="op">(</span>topo<span class="op">=</span><span class="st">"hexagonal"</span>,xdim<span class="op">=</span><span class="fl">4</span>,ydim<span class="op">=</span><span class="fl">4</span><span class="op">)</span>
  
  <span class="co">## Then we train the self-organized map by our iris data</span>
  <span class="co">## "rlen" specifies the number of iteration of the minimization of distances</span>
  <span class="va">iris.som</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/supersom.html">som</a></span><span class="op">(</span><span class="va">iris.mx</span>,<span class="va">g1</span>,rlen<span class="op">=</span><span class="fl">200</span><span class="op">)</span>
  
  <span class="co">## When we visualize the distribution of values in some other column in each output unit, we have to make the column as integer. </span>
  <span class="co">## Here, we take iris species as label.code (1=setosa,2=versicolor, and 3=virginica)</span>
  <span class="va">label.code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span><span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> 
  <span class="co">## plot the each unit and their typical relative value of each variable</span>
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">iris.som</span>, type<span class="op">=</span><span class="st">'codes'</span><span class="op">)</span>  
  <span class="co">## plot the distribution of iris species in each output unit </span>
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">iris.som</span>,type<span class="op">=</span><span class="st">"mapping"</span>,labels<span class="op">=</span><span class="va">label.code</span>,col<span class="op">=</span><span class="va">label.code</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="r_recursive_codes_and_som_files/figure-html/unnamed-chunk-6-1.png" width="960" style="display: block; margin: auto;"></div>
<p>The plots clearly show simultaneously that (1) what kind of patterns of multiple variables appear in the data, or what kind of clusters (output layer) seem to be in the data set, and (2) how the characteristic of each cluster is related to the third variable, iris spices.
Hence, it is helpful no matter we only understand the data visually or further proceed to train a classification model.</p>
<p>We can check the convergence of the iteration of the minimization of distance by plotting the path of the average distance to the closest output layer unit.</p>
<div class="sourceCode" id="cb765"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">iris.som</span>, type<span class="op">=</span><span class="st">'change'</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="r_recursive_codes_and_som_files/figure-html/unnamed-chunk-7-1.png" width="960" style="display: block; margin: auto;"></div>
<p>We can also plot the counts of data points that belong to each output unit.</p>
<div class="sourceCode" id="cb766"><pre class="downlit sourceCode r">
<code class="sourceCode R">   <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">iris.som</span>, type<span class="op">=</span><span class="st">'counts'</span>, palette.name <span class="op">=</span> <span class="va">cm.colors</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="r_recursive_codes_and_som_files/figure-html/unnamed-chunk-8-1.png" width="960" style="display: block; margin: auto;"></div>
</div>
<div id="titanic-data" class="section level3">
<h3>
<span class="header-section-number">63.2.2</span> Titanic data<a class="anchor" aria-label="anchor" href="#titanic-data"><i class="fas fa-link"></i></a>
</h3>
<p>This method can be applied to non-numeric data if we convert discrete variables into integers.
The illustration below is for the Titanic data. It clearly shows that the most effective variable to predict the survival rate would be sex. Note that we set sex as 1:man, 2:woman, and survival as 1:survived and 2:not survived.</p>
<div class="sourceCode" id="cb767"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">5702</span><span class="op">)</span>

  <span class="va">d1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">Titanic</span><span class="op">)</span>
  
  <span class="va">Tita</span> <span class="op">&lt;-</span> <span class="va">d1</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">d1</span><span class="op">)</span><span class="op">)</span>, <span class="va">d1</span><span class="op">$</span><span class="va">Freq</span><span class="op">)</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">Tita</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
  
  <span class="va">Tita_n</span> <span class="op">&lt;-</span> <span class="va">Tita</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>class_n<span class="op">=</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Class</span><span class="op">==</span><span class="st">"3rd"</span>,<span class="fl">3</span>,<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Class</span><span class="op">==</span><span class="st">"2nd"</span>,<span class="fl">2</span>,<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Class</span><span class="op">==</span><span class="st">"1st"</span>,<span class="fl">1</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>sex_n<span class="op">=</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Sex</span><span class="op">==</span><span class="st">"Male"</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Age_n<span class="op">=</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Age</span><span class="op">==</span><span class="st">"Adult"</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>Survived_n<span class="op">=</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fifelse.html">ifelse</a></span><span class="op">(</span><span class="va">Survived</span><span class="op">==</span><span class="st">"Yes"</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>
  
  <span class="va">g2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/unit.distances.html">somgrid</a></span><span class="op">(</span>topo<span class="op">=</span><span class="st">"hexagonal"</span>,xdim<span class="op">=</span><span class="fl">5</span>,ydim<span class="op">=</span><span class="fl">5</span><span class="op">)</span>
  
  <span class="va">Tita.som</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/supersom.html">som</a></span><span class="op">(</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">Tita_n</span><span class="op">[</span>,<span class="fl">5</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span><span class="op">)</span>,<span class="va">g2</span>,rlen<span class="op">=</span><span class="fl">500</span><span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">Tita.som</span>, type<span class="op">=</span><span class="st">'codes'</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">Tita.som</span>,type<span class="op">=</span><span class="st">"mapping"</span>,labels<span class="op">=</span><span class="va">Tita_n</span><span class="op">[</span>,<span class="fl">8</span><span class="op">]</span>,col<span class="op">=</span><span class="va">Tita_n</span><span class="op">[</span>,<span class="fl">8</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="r_recursive_codes_and_som_files/figure-html/unnamed-chunk-9-1.png" width="960" style="display: block; margin: auto;"></div>
</div>
<div id="limitation-in-mapping-plot" class="section level3">
<h3>
<span class="header-section-number">63.2.3</span> Limitation in Mapping plot<a class="anchor" aria-label="anchor" href="#limitation-in-mapping-plot"><i class="fas fa-link"></i></a>
</h3>
<p>The third example is for lending data in <code>openintro</code> package. From the plots below, one can see as the sample size increases, the mapping plot becomes hard to see, which is a limit of package <code>kohonen</code>. For large sample data, We should randomly sample from the data first, and then plot the self-organized map.</p>
<div class="sourceCode" id="cb768"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">5702</span><span class="op">)</span>

  <span class="va">Lend</span> <span class="op">&lt;-</span> <span class="va">loans_full_schema</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">annual_income</span>,<span class="va">total_credit_limit</span>,<span class="va">interest_rate</span>,<span class="va">balance</span>,<span class="va">num_historical_failed_to_pay</span><span class="op">)</span>

  <span class="va">g3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/unit.distances.html">somgrid</a></span><span class="op">(</span>topo<span class="op">=</span><span class="st">"hexagonal"</span>,xdim<span class="op">=</span><span class="fl">5</span>,ydim<span class="op">=</span><span class="fl">7</span><span class="op">)</span>
  
  <span class="va">Lend.som</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/supersom.html">som</a></span><span class="op">(</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">Lend</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span>,<span class="va">g3</span>,rlen<span class="op">=</span><span class="fl">2000</span><span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">Lend.som</span>, type<span class="op">=</span><span class="st">'codes'</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">Lend.som</span>,type<span class="op">=</span><span class="st">"mapping"</span>,labels<span class="op">=</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">Lend</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span><span class="op">)</span>,col<span class="op">=</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">Lend</span><span class="op">[</span>,<span class="fl">5</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="r_recursive_codes_and_som_files/figure-html/unnamed-chunk-10-1.png" width="960" style="display: block; margin: auto;"></div>
</div>
<div id="limitation-in-codes-plot" class="section level3">
<h3>
<span class="header-section-number">63.2.4</span> Limitation in Codes plot<a class="anchor" aria-label="anchor" href="#limitation-in-codes-plot"><i class="fas fa-link"></i></a>
</h3>
<p>The last example is for data of fifty states in USA from <code>datasets</code> package.
Generally, as the number of variables increases, the codes plot is also getting hard to see.</p>
<div class="sourceCode" id="cb769"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">5702</span><span class="op">)</span>

  <span class="va">States</span> <span class="op">&lt;-</span> <span class="va">state.x77</span>

  <span class="va">g4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/unit.distances.html">somgrid</a></span><span class="op">(</span>topo<span class="op">=</span><span class="st">"hexagonal"</span>,xdim<span class="op">=</span><span class="fl">3</span>,ydim<span class="op">=</span><span class="fl">3</span><span class="op">)</span>
  
  <span class="va">Lend.som</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/kohonen/man/supersom.html">som</a></span><span class="op">(</span><span class="va">States</span>,<span class="va">g4</span>,rlen<span class="op">=</span><span class="fl">200</span><span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span> 
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">Lend.som</span>, type<span class="op">=</span><span class="st">'codes'</span>,palette.name <span class="op">=</span> <span class="va">rainbow</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/plot.roc.html">plot</a></span><span class="op">(</span><span class="va">Lend.som</span>,type<span class="op">=</span><span class="st">"mapping"</span>,labels<span class="op">=</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.matrix.html">as.matrix</a></span><span class="op">(</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">rownames</a></span><span class="op">(</span><span class="va">States</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="r_recursive_codes_and_som_files/figure-html/unnamed-chunk-11-1.png" width="960" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="three-situations-that-i-think-ggplot-is-the-most-useful-in-practice" class="section level2">
<h2>
<span class="header-section-number">63.3</span> Three situations that I think “ggplot” is the most useful in practice:<a class="anchor" aria-label="anchor" href="#three-situations-that-i-think-ggplot-is-the-most-useful-in-practice"><i class="fas fa-link"></i></a>
</h2>
<div id="motivation-5" class="section level3">
<h3>
<span class="header-section-number">63.3.1</span> Motivation<a class="anchor" aria-label="anchor" href="#motivation-5"><i class="fas fa-link"></i></a>
</h3>
<p>In this chapter, based on my six-year experience as a credit risk manager in a commercial bank, I introduce three situations that I think “ggplot” is very useful in real work even for non-specialists in data science.</p>
<p>In practice, I used Excel most of the time, because there were very few people who could use “ggplot” or any other datavis tools requiring some coding.
This is because it is most important that when one worker moves to another department or quits his/her job and therefore hands it to a successor, the successor who does not necessarily a specialist in Data Science can stably handle the tools, too.
Specifically, if some datavis job has been done in 2021 and been reported to general managers, it is often the case that it needs to be done again in the next year or month to keep tracking the relevant changes.
So, if the original contributor leaves his/her role by the next year, the role has to be accomplished by a successor.
Therefore, I believe that in normal companies, most of our datavis job will remain to be done by Excel for the time being.</p>
<p>That been said, I also believe that blending some uses of “ggplot” or other suitable datavis tools with Excel would be undoubtedly better because it is often difficult and time-consuming to do some datavis manipulation through Excel.
Hereafter, I introduce such datavis manipulations (which we already learned in the class) that we should use “ggplot” as a partial supportive tool.
This may ignite non-specialist workers’ interest in “ggplot” and spread its use in our office.</p>
</div>
<div id="situation-1.-attaching-labels-in-scatter-plotbubble-chart-not-to-overlap-with-each-other" class="section level3">
<h3>
<span class="header-section-number">63.3.2</span> Situation 1. Attaching labels in scatter plot/bubble chart not to overlap with each other<a class="anchor" aria-label="anchor" href="#situation-1.-attaching-labels-in-scatter-plotbubble-chart-not-to-overlap-with-each-other"><i class="fas fa-link"></i></a>
</h3>
<p>In practice, there are tons of situations that we use scatter plots and bubble charts.
Typically, there are many data points in scatter plots and bubbles in bubble charts.
Hence, when we attach labels to all points/bubbles in the plot/chart, they often overlap with each other, making it difficult to read.</p>
<p>I believe Excel cannot automatically manipulate so that they do not overlap.
Hence, this is where “ggplot” comes in.
As introduced in our class, we should use <code>geom_text_repel</code> function in <code>ggrepel</code> package.</p>
</div>
<div id="situation-2.-cleveland-dot-plots" class="section level3">
<h3>
<span class="header-section-number">63.3.3</span> Situation 2. Cleveland dot plots<a class="anchor" aria-label="anchor" href="#situation-2.-cleveland-dot-plots"><i class="fas fa-link"></i></a>
</h3>
<p>In practice, we often want to make comparisons for multiple indices simultaneously, which Cleveland dot plots are most good at.
I think in such a situation, non-specialist workers typically use multiple bar charts or multiple line graphs.
However, as pointed out in the class, multiple bar charts are difficult to read in general, and the multiple line graphs often become redundant and hard to read especially if lines are crossing with each other.
Even though We can draw a “Cleveland dot plots”-like plot using the scatter plots function in Excel, it is time-consuming to set x/y-axis values multiple legends/colors properly.</p>
</div>
<div id="situation-3.-multivariate-plots" class="section level3">
<h3>
<span class="header-section-number">63.3.4</span> Situation 3. Multivariate plots<a class="anchor" aria-label="anchor" href="#situation-3.-multivariate-plots"><i class="fas fa-link"></i></a>
</h3>
<p>In practice, we often want to observe how the relationship between X and Y is affected by a third variable Z.
Among many datavis tools introduced in the class such as mosaic plots and alluvial plots, I believe few can be drawn by Excel at the best of my knowledge.
Hence, in this point of view, I feel much possibilities of “ggplot” to spread into our daily office.</p>
</div>
</div>
<div id="references-3" class="section level2">
<h2>
<span class="header-section-number">63.4</span> References<a class="anchor" aria-label="anchor" href="#references-3"><i class="fas fa-link"></i></a>
</h2>
<p>[1] Bruno Woltzenlogel Paleo, Levenshtein Distance: Two Applications in Database Record Linkage and Natural Language Processing, <em>LAP LAMBERT Academic Publishing</em></p>
<p>[2] Package “kohonen”: <a href="https://cran.r-project.org/web/packages/kohonen/kohonen.pdf" class="uri">https://cran.r-project.org/web/packages/kohonen/kohonen.pdf</a></p>
<p>[3] Examples of self-organized map with R, <em>Doshisha University</em>: <a href="https://www1.doshisha.ac.jp/~mjin/R/Chap_30/30.html" class="uri">https://www1.doshisha.ac.jp/~mjin/R/Chap_30/30.html</a></p>

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="edav-tutorials-correlogram-calendar-heatmap-and-slopegram.html"><span class="header-section-number">62</span> EDAV Tutorials: Correlogram, Calendar Heatmap and Slopegram</a></div>
<div class="next"><a href="introduction-to-analytics-consulting-at-accenture.html"><span class="header-section-number">64</span> Introduction to analytics consulting at Accenture</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#recursive-codes-and-self-organized-map-with-r"><span class="header-section-number">63</span> Recursive codes and self-organized map with R</a></li>
<li>
<a class="nav-link" href="#to-conduct-all-analyses-with-r-write-recursive-code-with-r"><span class="header-section-number">63.1</span> To conduct all analyses with R – Write recursive code with R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#motivation-4"><span class="header-section-number">63.1.1</span> Motivation</a></li>
<li><a class="nav-link" href="#an-illustration-of-recursive-code-levenshtein-distance"><span class="header-section-number">63.1.2</span> An illustration of recursive code: Levenshtein distance</a></li>
<li><a class="nav-link" href="#naive-coding"><span class="header-section-number">63.1.3</span> Naive coding</a></li>
<li><a class="nav-link" href="#better-coding-using-dp-table"><span class="header-section-number">63.1.4</span> Better coding using DP table</a></li>
<li><a class="nav-link" href="#recursive-coding-using-global-variable"><span class="header-section-number">63.1.5</span> Recursive coding using global variable</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#self-organized-map-with-r"><span class="header-section-number">63.2</span> Self-organized map with R</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#iris-data"><span class="header-section-number">63.2.1</span> Iris data</a></li>
<li><a class="nav-link" href="#titanic-data"><span class="header-section-number">63.2.2</span> Titanic data</a></li>
<li><a class="nav-link" href="#limitation-in-mapping-plot"><span class="header-section-number">63.2.3</span> Limitation in Mapping plot</a></li>
<li><a class="nav-link" href="#limitation-in-codes-plot"><span class="header-section-number">63.2.4</span> Limitation in Codes plot</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#three-situations-that-i-think-ggplot-is-the-most-useful-in-practice"><span class="header-section-number">63.3</span> Three situations that I think “ggplot” is the most useful in practice:</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#motivation-5"><span class="header-section-number">63.3.1</span> Motivation</a></li>
<li><a class="nav-link" href="#situation-1.-attaching-labels-in-scatter-plotbubble-chart-not-to-overlap-with-each-other"><span class="header-section-number">63.3.2</span> Situation 1. Attaching labels in scatter plot/bubble chart not to overlap with each other</a></li>
<li><a class="nav-link" href="#situation-2.-cleveland-dot-plots"><span class="header-section-number">63.3.3</span> Situation 2. Cleveland dot plots</a></li>
<li><a class="nav-link" href="#situation-3.-multivariate-plots"><span class="header-section-number">63.3.4</span> Situation 3. Multivariate plots</a></li>
</ul>
</li>
<li><a class="nav-link" href="#references-3"><span class="header-section-number">63.4</span> References</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jtr13/cc21fall2/blob/main/r_recursive_codes_and_som.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jtr13/cc21fall2/edit/main/r_recursive_codes_and_som.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>EDAV Fall 2021 Tues/Thurs Community Contributions</strong>" was written by . It was last built on 2021-11-08.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
